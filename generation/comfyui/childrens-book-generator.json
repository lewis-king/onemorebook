{"id":"d776ef32-68ed-4ea6-8200-de4a5b6a8a1f","revision":0,"last_node_id":138,"last_link_id":170,"nodes":[{"id":17,"type":"OllamaConnectivityV2","pos":[715.2567138671875,-1275.281005859375],"size":[270,154],"flags":{},"order":0,"mode":4,"inputs":[{"localized_name":"url","name":"url","type":"STRING","widget":{"name":"url"},"link":null},{"localized_name":"model","name":"model","type":"COMBO","widget":{"name":"model"},"link":null},{"localized_name":"keep_alive","name":"keep_alive","type":"INT","widget":{"name":"keep_alive"},"link":null},{"localized_name":"keep_alive_unit","name":"keep_alive_unit","type":"COMBO","widget":{"name":"keep_alive_unit"},"link":null}],"outputs":[{"localized_name":"connection","name":"connection","type":"OLLAMA_CONNECTIVITY","links":[18]}],"properties":{"cnr_id":"comfyui-ollama","ver":"b916c54577cf45c8a259d1ecb5c85c64d07a4e81","Node name for S&R":"OllamaConnectivityV2","widget_ue_connectable":{}},"widgets_values":["http://127.0.0.1:11434","qwen3:30b-a3b-instruct-2507-q4_K_M",5,"minutes",null]},{"id":31,"type":"OllamaOptionsV2","pos":[707.5072631835938,-1065.2650146484375],"size":[286.103515625,754],"flags":{},"order":1,"mode":4,"inputs":[{"localized_name":"enable_mirostat","name":"enable_mirostat","type":"BOOLEAN","widget":{"name":"enable_mirostat"},"link":null},{"localized_name":"mirostat","name":"mirostat","type":"INT","widget":{"name":"mirostat"},"link":null},{"localized_name":"enable_mirostat_eta","name":"enable_mirostat_eta","type":"BOOLEAN","widget":{"name":"enable_mirostat_eta"},"link":null},{"localized_name":"mirostat_eta","name":"mirostat_eta","type":"FLOAT","widget":{"name":"mirostat_eta"},"link":null},{"localized_name":"enable_mirostat_tau","name":"enable_mirostat_tau","type":"BOOLEAN","widget":{"name":"enable_mirostat_tau"},"link":null},{"localized_name":"mirostat_tau","name":"mirostat_tau","type":"FLOAT","widget":{"name":"mirostat_tau"},"link":null},{"localized_name":"enable_num_ctx","name":"enable_num_ctx","type":"BOOLEAN","widget":{"name":"enable_num_ctx"},"link":null},{"localized_name":"num_ctx","name":"num_ctx","type":"INT","widget":{"name":"num_ctx"},"link":null},{"localized_name":"enable_repeat_last_n","name":"enable_repeat_last_n","type":"BOOLEAN","widget":{"name":"enable_repeat_last_n"},"link":null},{"localized_name":"repeat_last_n","name":"repeat_last_n","type":"INT","widget":{"name":"repeat_last_n"},"link":null},{"localized_name":"enable_repeat_penalty","name":"enable_repeat_penalty","type":"BOOLEAN","widget":{"name":"enable_repeat_penalty"},"link":null},{"localized_name":"repeat_penalty","name":"repeat_penalty","type":"FLOAT","widget":{"name":"repeat_penalty"},"link":null},{"localized_name":"enable_temperature","name":"enable_temperature","type":"BOOLEAN","widget":{"name":"enable_temperature"},"link":null},{"localized_name":"temperature","name":"temperature","type":"FLOAT","widget":{"name":"temperature"},"link":null},{"localized_name":"enable_seed","name":"enable_seed","type":"BOOLEAN","widget":{"name":"enable_seed"},"link":null},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"enable_stop","name":"enable_stop","type":"BOOLEAN","widget":{"name":"enable_stop"},"link":null},{"localized_name":"stop","name":"stop","type":"STRING","widget":{"name":"stop"},"link":null},{"localized_name":"enable_tfs_z","name":"enable_tfs_z","type":"BOOLEAN","widget":{"name":"enable_tfs_z"},"link":null},{"localized_name":"tfs_z","name":"tfs_z","type":"FLOAT","widget":{"name":"tfs_z"},"link":null},{"localized_name":"enable_num_predict","name":"enable_num_predict","type":"BOOLEAN","widget":{"name":"enable_num_predict"},"link":null},{"localized_name":"num_predict","name":"num_predict","type":"INT","widget":{"name":"num_predict"},"link":null},{"localized_name":"enable_top_k","name":"enable_top_k","type":"BOOLEAN","widget":{"name":"enable_top_k"},"link":null},{"localized_name":"top_k","name":"top_k","type":"INT","widget":{"name":"top_k"},"link":null},{"localized_name":"enable_top_p","name":"enable_top_p","type":"BOOLEAN","widget":{"name":"enable_top_p"},"link":null},{"localized_name":"top_p","name":"top_p","type":"FLOAT","widget":{"name":"top_p"},"link":null},{"localized_name":"enable_min_p","name":"enable_min_p","type":"BOOLEAN","widget":{"name":"enable_min_p"},"link":null},{"localized_name":"min_p","name":"min_p","type":"FLOAT","widget":{"name":"min_p"},"link":null},{"localized_name":"debug","name":"debug","type":"BOOLEAN","widget":{"name":"debug"},"link":null}],"outputs":[{"localized_name":"options","name":"options","type":"OLLAMA_OPTIONS","links":[24]}],"properties":{"cnr_id":"comfyui-ollama","ver":"2.0.7","Node name for S&R":"OllamaOptionsV2"},"widgets_values":[false,0,false,0.1,false,5,false,2048,false,64,false,1.1,false,0.7,false,620974936,"randomize",false,"",false,1,false,-1,false,20,false,0.8,false,0,false]},{"id":33,"type":"JSONParserNode","pos":[2074.515380859375,-1373.3270263671875],"size":[400,200],"flags":{},"order":13,"mode":4,"inputs":[{"localized_name":"json_string","name":"json_string","type":"STRING","widget":{"name":"json_string"},"link":148},{"localized_name":"path","name":"path","type":"STRING","widget":{"name":"path"},"link":null}],"outputs":[{"localized_name":"parsed_data","name":"parsed_data","type":"STRING","links":[151]},{"localized_name":"array_size","name":"array_size","type":"INT","links":null}],"properties":{"cnr_id":"comfyui-simple-json-node","ver":"1.1.0","Node name for S&R":"JSONParserNode"},"widgets_values":["{\n  \"id\": \"princess-pretty-bell\",\n  \"pages\": [\n    {\n      \"text\": \"In the sunny kingdom of Glimmerwick, where flowers sang lullabies and rivers sparkled with gold, lived a princess named Pretty Bell. She wasn’t named for her looks—though she did have twinkling eyes and hair like spun moonlight—but because she loved to ring her tiny silver bell at dawn, waking the whole castle with cheerful chimes.\",\n      \"pageNumber\": 1,\n      \"imagePrompt\": \"A cheerful young princess with long, silvery-white hair and bright blue eyes stands on a sunlit balcony of a pastel-colored castle with floating flower gardens below. She holds a small, delicate silver bell, smiling as golden sunlight glimmers off its surface. Butterflies flutter around her, and tiny glowing flowers bloom in the air. The sky is a soft pink and yellow, with fluffy clouds shaped like hearts. [a gentle, shimmering dragon with pastel wings and a kind face flies nearby, watching her with curiosity].\",\n      \"charactersPresent\": [\n        \"Princess Pretty Bell\",\n        \"A gentle, shimmering dragon\"\n      ],\n      \"isMainCharacterPresent\": true\n    },\n    {\n      \"text\": \"One morning, the bell stopped ringing. Not because Pretty Bell forgot—but because the magical bell had vanished! The castle was silent. The flowers drooped. Even the sun seemed to frown.\",\n      \"pageNumber\": 2,\n      \"imagePrompt\": \"Princess Pretty Bell kneels on the stone floor of a quiet castle hall, her hands clutching an empty space where her silver bell once hung. The once-bright chandelier now dims, and the enchanted flowers in the hallway have lost their glow. A small, worried expression on her face as she looks around. [a tiny, grumpy-looking gnome with a red hat and oversized spectacles peers from behind a tapestry, holding a tiny magnifying glass].\",\n      \"charactersPresent\": [\n        \"Princess Pretty Bell\",\n        \"A tiny, grumpy-looking gnome\"\n      ],\n      \"isMainCharacterPresent\": true\n    },\n    {\n      \"text\": \"Determined to find her bell, Pretty Bell packed a satchel with a map, a loaf of honey bread, and her favorite storybook. She set off through the Whispering Woods, where trees hummed secrets and mushrooms blinked like eyes.\",\n      \"pageNumber\": 3,\n      \"imagePrompt\": \"Princess Pretty Bell walks through a magical forest with glowing mushrooms lighting the path. Trees with smiling bark and glowing leaves sway gently. She wears a light blue dress with golden stars and carries a satchel. A small, friendly fox with silver-tipped fur follows her, sniffing the air. [a mischievous squirrel with a tiny crown and a backpack hops from branch to branch above her].\",\n      \"charactersPresent\": [\n        \"Princess Pretty Bell\",\n        \"A small, friendly fox\",\n        \"A mischievous squirrel\"\n      ],\n      \"isMainCharacterPresent\": true\n    },\n    {\n      \"text\": \"At the heart of the woods, she met a shy, moss-covered creature who whispered, 'The bell is lost in the Sky Hollow, guarded by the Cloud Cat. But only kindness can win it back.'\",\n      \"pageNumber\": 4,\n      \"imagePrompt\": \"Princess Pretty Bell stands before a glowing, moss-covered creature with large, gentle eyes and tiny green leaves growing from its head. They sit on a giant mushroom in a glowing clearing. Above them, a swirling sky hollow glows with pastel clouds. A fluffy, silver cat with cloud-like fur and glowing blue eyes watches from a floating island. [a tiny, curious owl with round glasses perches on a glowing toadstool nearby].\",\n      \"charactersPresent\": [\n        \"Princess Pretty Bell\",\n        \"A moss-covered creature\",\n        \"A Cloud Cat\",\n        \"A tiny, curious owl\"\n      ],\n      \"isMainCharacterPresent\": true\n    },\n    {\n      \"text\": \"To reach the Cloud Cat, Pretty Bell had to cross the Bridge of Laughter, where every step made her giggle. She laughed so hard she almost fell—until she remembered: her bell wasn’t just a toy. It was her heart’s song.\",\n      \"pageNumber\": 5,\n      \"imagePrompt\": \"Princess Pretty Bell walks across a rainbow bridge made of giggles, with floating giggles forming bubbles in the air. The bridge pulses with joy, and the ground trembles with laughter. She’s laughing uncontrollably, clutching her stomach, but still manages to keep her balance. The Cloud Cat watches from a cloud island above, smiling. [a pair of giggling twin butterflies flit beside her].\",\n      \"charactersPresent\": [\n        \"Princess Pretty Bell\",\n        \"A Cloud Cat\",\n        \"A pair of giggling twin butterflies\"\n      ],\n      \"isMainCharacterPresent\": true\n    },\n    {\n      \"text\": \"When she finally reached the Cloud Cat, she didn’t ask for the bell. Instead, she sang the song her mother used to hum—the one that made the stars dance. The Cloud Cat blinked, then gently placed the silver bell into her hands.\",\n      \"pageNumber\": 6,\n      \"imagePrompt\": \"Princess Pretty Bell sits on a fluffy cloud island, softly singing with her eyes closed. Golden light swirls around her as she sings. The Cloud Cat leans forward, eyes wide with wonder, placing the silver bell into her hands. The sky glows with dancing stars and shimmering constellations. [a tiny, glowing firefly with a tiny crown floats above her head].\",\n      \"charactersPresent\": [\n        \"Princess Pretty Bell\",\n        \"A Cloud Cat\",\n        \"A tiny, glowing firefly\"\n      ],\n      \"isMainCharacterPresent\": true\n    },\n    {\n      \"text\": \"Back at the castle, Pretty Bell rang her bell once more. The flowers burst into song, the rivers sparkled brighter, and the whole kingdom danced. And from that day on, the bell didn’t just ring—it remembered every kind act, every brave heart, every joyful moment.\",\n      \"pageNumber\": 7,\n      \"imagePrompt\": \"Princess Pretty Bell stands on the castle balcony, ringing her silver bell. The entire kingdom comes alive—dancing flowers, singing birds, laughing children, and even the castle walls glow with joy. The sky is full of dancing stars and floating musical notes. [a gentle, shimmering dragon flies in a joyful loop around the castle, followed by a trail of glittering sparkles].\",\n      \"charactersPresent\": [\n        \"Princess Pretty Bell\",\n        \"A gentle, shimmering dragon\"\n      ],\n      \"isMainCharacterPresent\": true\n    }\n  ],\n  \"metadata\": {\n    \"theme\": \"Kindness, Courage, and the Power of Joy\",\n    \"title\": \"Princess Pretty Bell and the Bell of Kindness\",\n    \"ageRange\": \"4-8\",\n    \"characters\": [\n      \"Princess Pretty Bell\",\n      \"A gentle, shimmering dragon\",\n      \"A moss-covered creature\",\n      \"A Cloud Cat\",\n      \"A tiny, grumpy-looking gnome\",\n      \"A small, friendly fox\",\n      \"A mischievous squirrel\",\n      \"A tiny, curious owl\",\n      \"A pair of giggling twin butterflies\",\n      \"A tiny, glowing firefly\"\n    ],\n    \"bookSummary\": \"When Princess Pretty Bell’s magical bell disappears, she embarks on a whimsical journey through enchanted lands to find it. Along the way, she learns that true magic lies not in the object, but in kindness, courage, and the joy she brings to others. With help from forest friends and a heart full of song, she returns home to restore harmony to her kingdom.\",\n    \"storyPrompt\": \"A cheerful princess whose magical bell has vanished must journey through enchanted lands to find it, discovering that kindness and joy are the real magic.\",\n    \"coverImagePrompt\": \"Princess Pretty Bell stands in the center of a glowing, magical meadow, holding her silver bell high. Around her, flowers bloom in song, butterflies dance, and a gentle dragon flies above. The sky is a swirl of pastel colors with stars and musical notes floating in the air. [a glowing, whimsical castle floats in the background with golden turrets].\",\n    \"styleReferencePrompt\": \"bright watercolor and playful cartoon\",\n    \"mainCharacterDescriptivePrompt\": \"Princess Pretty Bell is a young girl with long, silvery-white hair that glimmers like moonlight, bright blue eyes full of wonder, and a soft, kind smile. She wears a flowing blue dress with golden star patterns and a small silver bell charm on her belt. Her movements are gentle, and her presence radiates warmth and joy. She is brave, curious, and deeply kind-hearted.\"\n  }\n}","metadata.coverImagePrompt"]},{"id":126,"type":"JSONParserNode","pos":[2532.2900390625,-1293.4764404296875],"size":[400,200],"flags":{},"order":14,"mode":4,"inputs":[{"localized_name":"json_string","name":"json_string","type":"STRING","widget":{"name":"json_string"},"link":149},{"localized_name":"path","name":"path","type":"STRING","widget":{"name":"path"},"link":null}],"outputs":[{"localized_name":"parsed_data","name":"parsed_data","type":"STRING","links":[150]},{"localized_name":"array_size","name":"array_size","type":"INT","links":null}],"properties":{"cnr_id":"comfyui-simple-json-node","ver":"1.1.0","Node name for S&R":"JSONParserNode"},"widgets_values":["","metadata.styleReferencePrompt"]},{"id":107,"type":"1059b46b-73be-4cb4-bf7d-0a911d460aa1","pos":[2879.4658203125,-1651.3914794921875],"size":[576.7478637695312,146.31683349609375],"flags":{},"order":25,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":143},{"name":"prompt","type":"STRING","widget":{"name":"prompt"},"link":152}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[116]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.63"},"widgets_values":[""]},{"id":123,"type":"LoadImage","pos":[2184.975341796875,-1749.7879638671875],"size":[274.080078125,314],"flags":{},"order":2,"mode":4,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[143]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.63","Node name for S&R":"LoadImage"},"widgets_values":["ComfyUI_00086_.png","image"]},{"id":127,"type":"StringConcatenate","pos":[2969.996337890625,-1396.3226318359375],"size":[400,200],"flags":{},"order":20,"mode":4,"inputs":[{"localized_name":"string_a","name":"string_a","type":"STRING","widget":{"name":"string_a"},"link":151},{"localized_name":"string_b","name":"string_b","type":"STRING","widget":{"name":"string_b"},"link":150},{"localized_name":"delimiter","name":"delimiter","type":"STRING","widget":{"name":"delimiter"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[152]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.63","Node name for S&R":"StringConcatenate"},"widgets_values":["","",""]},{"id":108,"type":"SaveImage","pos":[3483.57177734375,-1689.0185546875],"size":[490,600],"flags":{},"order":29,"mode":4,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":116},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"SaveImage","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":["ComfyUI"]},{"id":73,"type":"JSONParserNode","pos":[2064.062744140625,-2917.669677734375],"size":[400,200],"flags":{},"order":10,"mode":4,"inputs":[{"localized_name":"json_string","name":"json_string","type":"STRING","widget":{"name":"json_string"},"link":131},{"localized_name":"path","name":"path","type":"STRING","widget":{"name":"path"},"link":null}],"outputs":[{"localized_name":"parsed_data","name":"parsed_data","type":"STRING","links":[145]},{"localized_name":"array_size","name":"array_size","type":"INT","links":null}],"properties":{"cnr_id":"comfyui-simple-json-node","ver":"1.1.0","Node name for S&R":"JSONParserNode"},"widgets_values":["","metadata.mainCharacterDescriptivePrompt"]},{"id":125,"type":"JSONParserNode","pos":[2067.497802734375,-2658.870361328125],"size":[400,200],"flags":{},"order":12,"mode":4,"inputs":[{"localized_name":"json_string","name":"json_string","type":"STRING","widget":{"name":"json_string"},"link":147},{"localized_name":"path","name":"path","type":"STRING","widget":{"name":"path"},"link":null}],"outputs":[{"localized_name":"parsed_data","name":"parsed_data","type":"STRING","links":[146]},{"localized_name":"array_size","name":"array_size","type":"INT","links":null}],"properties":{"cnr_id":"comfyui-simple-json-node","ver":"1.1.0","Node name for S&R":"JSONParserNode"},"widgets_values":["","metadata.styleReferencePrompt"]},{"id":124,"type":"StringConcatenate","pos":[2625.61376953125,-2853.015625],"size":[400,200],"flags":{},"order":19,"mode":4,"inputs":[{"localized_name":"string_a","name":"string_a","type":"STRING","widget":{"name":"string_a"},"link":145},{"localized_name":"string_b","name":"string_b","type":"STRING","widget":{"name":"string_b"},"link":146},{"localized_name":"delimiter","name":"delimiter","type":"STRING","widget":{"name":"delimiter"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[144]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.63","Node name for S&R":"StringConcatenate"},"widgets_values":["","",""]},{"id":109,"type":"2e8677d0-e698-4a7e-a759-bdc06e447768","pos":[3121.73583984375,-2796.396240234375],"size":[210,88],"flags":{},"order":24,"mode":4,"inputs":[{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":144}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[142]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.63"},"widgets_values":["\"A vibrant, warm neon-lit street scene in Hong Kong at the afternoon, with a mix of colorful Chinese and English signs glowing brightly. The atmosphere is lively, cinematic, and rain-washed with reflections on the pavement. The colors are vivid, full of pink, blue, red, and green hues. Crowded buildings with overlapping neon signs. 1980s Hong Kong style. Signs include:\n\"龍鳳冰室\" \"金華燒臘\" \"HAPPY HAIR\" \"鴻運茶餐廳\" \"EASY BAR\" \"永發魚蛋粉\" \"添記粥麵\" \"SUNSHINE MOTEL\" \"美都餐室\" \"富記糖水\" \"太平館\" \"雅芳髮型屋\" \"STAR KTV\" \"銀河娛樂城\" \"百樂門舞廳\" \"BUBBLE CAFE\" \"萬豪麻雀館\" \"CITY LIGHTS BAR\" \"瑞祥香燭莊\" \"文記文具\" \"GOLDEN JADE HOTEL\" \"LOVELY BEAUTY\" \"合興百貨\" \"興旺電器\" And the background is warm yellow street and with all stores' lights on."]},{"id":122,"type":"SaveImage","pos":[3460.222412109375,-2846.892822265625],"size":[501.4586181640625,394.3281555175781],"flags":{},"order":28,"mode":4,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":142},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.63"},"widgets_values":["ComfyUI"]},{"id":5,"type":"ShowText|pysssss","pos":[1354.8592529296875,-1172.0960693359375],"size":[603.8035278320312,697.5764770507812],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"text","name":"text","type":"STRING","link":130}],"outputs":[{"localized_name":"STRING","name":"STRING","shape":6,"type":"STRING","links":[]}],"properties":{"cnr_id":"comfyui-custom-scripts","ver":"aac13aa7ce35b07d43633c3bbe654a38c00d74f5","Node name for S&R":"ShowText|pysssss","widget_ue_connectable":{}},"widgets_values":["{   \"id\": \"story_princess_penny_001\",   \"pages\": [     {       \"text\": \"Princess Penny loved glitter and gold,\\nAnd stories of dragons and knights of old.\\nShe wore a big dress with a bow on the back,\\nBut hidden beneath was her favorite sack!\",       \"pageNumber\": 1,       \"imagePrompt\": \"A bright, sunny royal bedroom. [Princess Penny, a cute 5-year-old girl with curly strawberry-blonde hair, wearing a puffy pink gown and a sparkling tiara] is kneeling on the floor, looking mischievous. She is peeking under her frilly bed where she is hiding a rugged canvas tool bag. The room is filled with stuffed animals and ribbons.\",       \"charactersPresent\": [         \"Princess Penny\"       ],       \"isMainCharacterPresent\": true     },     {       \"text\": \"Inside the sack were a hammer and wrench,\\nShe loved building forts and fixing a bench.\\n'A princess,' said Dad, 'should sit on a throne!'\\nBut Penny preferred building things on her own.\",       \"pageNumber\": 2,       \"imagePrompt\": \"Close up on [Princess Penny] holding a silver wrench up to the light, admiring it. She is wearing her tool belt over her fancy dress. In the background, slightly out of focus, [The King, a round man with a white beard and a large golden crown] looks confused but kindly, holding a teacup.\",       \"charactersPresent\": [         \"Princess Penny\",         \"The King\"       ],       \"isMainCharacterPresent\": true     },     {       \"text\": \"One sunny morning, a distinct CRACK and POP,\\nThe Royal Parade came to a sudden stop!\\nThe carriage had broken, a wheel rolled away,\\n'Oh no!' cried the King, 'This ruins the day!'\",       \"pageNumber\": 3,       \"imagePrompt\": \"A chaotic scene on a cobblestone street. A fancy golden carriage is tilted to one side because a wheel has fallen off. The wheel is rolling into the foreground. [The King] is throwing his hands in the air in panic. Confetti is falling, but everyone looks worried.\",       \"charactersPresent\": [         \"The King\"       ],       \"isMainCharacterPresent\": false     },     {       \"text\": \"The Royal Mechanic was stuck in a tree,\\n(Rescuing a cat who couldn’t get free).\\nThe King pulled his beard and let out a wail,\\n'Without a mechanic, the parade is a fail!'\",       \"pageNumber\": 4,       \"imagePrompt\": \"A split view. On one side, [The King] is weeping into a handkerchief next to the broken carriage. On the other side/background, a mechanic in blue coveralls is stuck high up in an apple tree, trying to reach a frightened white kitten.\",       \"charactersPresent\": [         \"The King\",         \"Royal Mechanic\",         \"Cat\"       ],       \"isMainCharacterPresent\": false     },     {       \"text\": \"Then Penny stepped forward, her tiara on straight,\\n'Don't worry, Daddy! The parade won't be late!'\\nShe grabbed her tools and rolled up her sleeves,\\nAnd dove right into the pile of leaves.\",       \"pageNumber\": 5,       \"imagePrompt\": \"Low angle hero shot of [Princess Penny]. She looks determined and brave. She is rolling up the puffy sleeves of her gown. She is wearing her leather tool belt. [The King] looks down at her in surprise. The background is the sunny park with autumn leaves on the ground.\",       \"charactersPresent\": [         \"Princess Penny\",         \"The King\"       ],       \"isMainCharacterPresent\": true     },     {       \"text\": \"She twisted the bolts and banged on the steel,\\nShe put back the spokes and greased up the wheel.\\nHer nose got a smudge, her dress got a tear,\\nBut Princess Penny didn't even care.\",       \"pageNumber\": 6,       \"imagePrompt\": \"Action shot. [Princess Penny] is lying on her back under the golden carriage. She is using a wrench to tighten a bolt. There is a smudge of black grease on her cheek and nose. Her dress is getting dirty, but she is smiling and focused.\",       \"charactersPresent\": [         \"Princess Penny\"       ],       \"isMainCharacterPresent\": true     },     {       \"text\": \"With a final strong turn, the wheel stayed in place!\\nA giant smile spread across the King's face.\\n'You did it!' he cheered, 'You fixed up the ride!\\nMy clever Princess, I'm bursting with pride!'\",       \"pageNumber\": 7,       \"imagePrompt\": \"[Princess Penny] stands up, wiping her hands on a rag. The carriage is level and fixed behind her. [The King] is lifting her up in a big hug, looking incredibly happy and proud. The crowd of townspeople in the background is cheering.\",       \"charactersPresent\": [         \"Princess Penny\",         \"The King\"       ],       \"isMainCharacterPresent\": true     },     {       \"text\": \"So remember this lesson, if you wear a crown,\\nOr if you wear sneakers and run around town:\\nYou can be fancy and skillful too,\\nThere’s nothing a clever kid cannot do!\",       \"pageNumber\": 8,       \"imagePrompt\": \"The Grand Parade in motion. [Princess Penny] is sitting in the driver's seat of the carriage holding the reins, waving to the crowd with a wrench in her hand. [The King] sits in the back waving. Confetti fills the air. The style is celebratory and vibrant.\",       \"charactersPresent\": [         \"Princess Penny\",         \"The King\"       ],       \"isMainCharacterPresent\": true     }   ],   \"metadata\": {     \"theme\": \"Breaking stereotypes, problem-solving, self-confidence\",     \"title\": \"Princess Penny's Wrench\",     \"ageRange\": \"5 years old\",     \"characters\": [       \"Princess Penny\",       \"The King\",       \"Mechanic\"     ],     \"bookSummary\": \"Princess Penny loves being a princess, but she also loves mechanics. When the Royal Carriage breaks down right before the big parade, Penny is the only one who can fix it, proving that you can be pretty and practical at the same time.\",     \"storyPrompt\": \"Write a rhyming story for a 5-year-old about a Princess who saves the day not with magic, but by fixing a broken carriage with tools.\",     \"coverImagePrompt\": \"A vibrant book cover featuring [Princess Penny, a cute girl in a pink gown and tiara] holding a large silver wrench triumphantly above her head. She has a grease smudge on her nose. Behind her is a golden carriage. The title 'Princess Penny's Wrench' is written in bubbly, sparkly gold letters.\",     \"styleReferencePrompt\": \"3D Pixar-style digital illustration, vibrant colors, soft lighting, expressive character faces, detailed textures on fabrics and metals, storybook aesthetic.\",     \"mainCharacterDescriptivePrompt\": \"[Princess Penny, a cute 5-year-old girl with curly strawberry-blonde hair, wearing a puffy pink gown, a sparkling tiara, but also wearing a brown leather tool belt and sturdy purple boots]\"   } }"]},{"id":27,"type":"OllamaGenerateV2","pos":[1046.3775634765625,-1259.287841796875],"size":[265.0924987792969,448.85595703125],"flags":{},"order":8,"mode":4,"inputs":[{"localized_name":"connectivity","name":"connectivity","shape":7,"type":"OLLAMA_CONNECTIVITY","link":18},{"localized_name":"options","name":"options","shape":7,"type":"OLLAMA_OPTIONS","link":24},{"localized_name":"images","name":"images","shape":7,"type":"IMAGE","link":null},{"localized_name":"context","name":"context","shape":7,"type":"OLLAMA_CONTEXT","link":null},{"localized_name":"meta","name":"meta","shape":7,"type":"OLLAMA_META","link":null},{"localized_name":"system","name":"system","type":"STRING","widget":{"name":"system"},"link":null},{"localized_name":"prompt","name":"prompt","type":"STRING","widget":{"name":"prompt"},"link":null},{"localized_name":"think","name":"think","type":"BOOLEAN","widget":{"name":"think"},"link":null},{"localized_name":"keep_context","name":"keep_context","type":"BOOLEAN","widget":{"name":"keep_context"},"link":null},{"localized_name":"format","name":"format","type":"COMBO","widget":{"name":"format"},"link":null}],"outputs":[{"localized_name":"result","name":"result","type":"STRING","links":[]},{"localized_name":"thinking","name":"thinking","type":"STRING","links":null},{"localized_name":"context","name":"context","type":"OLLAMA_CONTEXT","links":[]},{"localized_name":"meta","name":"meta","type":"OLLAMA_META","links":[]}],"properties":{"cnr_id":"comfyui-ollama","ver":"76c16d374e0834ab71a03da1da1dfd167d81e336","Node name for S&R":"OllamaGenerateV2","widget_ue_connectable":{}},"widgets_values":["You are a creative author of children's books for the specified age range. Based on the user's prompt, generate a complete story. The output must be a single, valid JSON object following this exact structure: {\"id\": \"...\", \"pages\": [{\"text\": \"...\", \"pageNumber\": ..., \"imagePrompt\": \"...\", \"charactersPresent\": [], \"isMainCharacterPresent\": true}], \"metadata\": {\"theme\": \"...\", \"title\": \"...\", \"ageRange\": \"...\", \"characters\": [], \"bookSummary\": \"...\", \"storyPrompt\": \"...\", \"coverImagePrompt\": \"...\", \"styleReferencePrompt\": \"...\", \"mainCharacterDescriptivePrompt\": \"...\"}}. The imagePrompt for each page must be a detailed, visually descriptive prompt for an AI image generator, including character descriptions within brackets like [a gentle, shimmering dragon...]. The styleReferencePrompt should describe a consistent art style, like 'bright watercolor and playful cartoon'. The mainCharacterDescriptivePrompt is a detailed character reference which can be used for character consistency throughout the story. \n","Story about a princess",false,false,"text"]},{"id":128,"type":"JSONParserNode","pos":[2076.604736328125,-2319.99609375],"size":[400,200],"flags":{},"order":16,"mode":4,"inputs":[{"localized_name":"json_string","name":"json_string","type":"STRING","widget":{"name":"json_string"},"link":157},{"localized_name":"path","name":"path","type":"STRING","widget":{"name":"path"},"link":null}],"outputs":[{"localized_name":"parsed_data","name":"parsed_data","type":"STRING","links":[154]},{"localized_name":"array_size","name":"array_size","type":"INT","links":null}],"properties":{"cnr_id":"comfyui-simple-json-node","ver":"1.1.0","Node name for S&R":"JSONParserNode"},"widgets_values":["","metadata.characters"]},{"id":129,"type":"JSONParserNode","pos":[2083.382080078125,-2058.073486328125],"size":[400,200],"flags":{},"order":17,"mode":4,"inputs":[{"localized_name":"json_string","name":"json_string","type":"STRING","widget":{"name":"json_string"},"link":158},{"localized_name":"path","name":"path","type":"STRING","widget":{"name":"path"},"link":null}],"outputs":[{"localized_name":"parsed_data","name":"parsed_data","type":"STRING","links":[156]},{"localized_name":"array_size","name":"array_size","type":"INT","links":null}],"properties":{"cnr_id":"comfyui-simple-json-node","ver":"1.1.0","Node name for S&R":"JSONParserNode"},"widgets_values":["","metadata.styleReferencePrompt"]},{"id":130,"type":"StringConcatenate","pos":[2591.337890625,-2306.607421875],"size":[400,200],"flags":{},"order":27,"mode":4,"inputs":[{"localized_name":"string_a","name":"string_a","type":"STRING","widget":{"name":"string_a"},"link":155},{"localized_name":"string_b","name":"string_b","type":"STRING","widget":{"name":"string_b"},"link":156},{"localized_name":"delimiter","name":"delimiter","type":"STRING","widget":{"name":"delimiter"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[160,164]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.63","Node name for S&R":"StringConcatenate"},"widgets_values":["",""," is the character to portray, in the style of "]},{"id":133,"type":"JSONArrayIteratorNode","pos":[2510.386962890625,-2028.5560302734375],"size":[400,200],"flags":{},"order":22,"mode":4,"inputs":[{"localized_name":"json_input","name":"json_input","type":"STRING","widget":{"name":"json_input"},"link":154},{"localized_name":"index","name":"index","type":"INT","widget":{"name":"index"},"link":null},{"localized_name":"mode","name":"mode","type":"COMBO","widget":{"name":"mode"},"link":null}],"outputs":[{"localized_name":"item","name":"item","type":"STRING","links":[155]},{"localized_name":"current_index","name":"current_index","type":"INT","links":null},{"localized_name":"total_items","name":"total_items","type":"INT","links":null}],"properties":{"cnr_id":"comfyui-simple-json-node","ver":"1.1.0","Node name for S&R":"JSONArrayIteratorNode"},"widgets_values":["",2,"fixed"]},{"id":136,"type":"ShowText|pysssss","pos":[3018.662109375,-1997.9970703125],"size":[443.5127868652344,164.52430725097656],"flags":{},"order":32,"mode":4,"inputs":[{"localized_name":"text","name":"text","type":"STRING","link":164}],"outputs":[{"localized_name":"STRING","name":"STRING","shape":6,"type":"STRING","links":null}],"properties":{"cnr_id":"comfyui-custom-scripts","ver":"f2838ed5e59de4d73cde5c98354b87a8d3200190","Node name for S&R":"ShowText|pysssss"},"widgets_values":["Mechanic is the character to portray, in the style of 3D Pixar-style digital illustration, vibrant colors, soft lighting, expressive character faces, detailed textures on fabrics and metals, storybook aesthetic."]},{"id":131,"type":"e916a009-db6c-459e-8b32-81186a6c4b1b","pos":[3239.866455078125,-2196.143798828125],"size":[210,88],"flags":{},"order":31,"mode":4,"inputs":[{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":160}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[159]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.63"},"widgets_values":["\"A vibrant, warm neon-lit street scene in Hong Kong at the afternoon, with a mix of colorful Chinese and English signs glowing brightly. The atmosphere is lively, cinematic, and rain-washed with reflections on the pavement. The colors are vivid, full of pink, blue, red, and green hues. Crowded buildings with overlapping neon signs. 1980s Hong Kong style. Signs include:\n\"龍鳳冰室\" \"金華燒臘\" \"HAPPY HAIR\" \"鴻運茶餐廳\" \"EASY BAR\" \"永發魚蛋粉\" \"添記粥麵\" \"SUNSHINE MOTEL\" \"美都餐室\" \"富記糖水\" \"太平館\" \"雅芳髮型屋\" \"STAR KTV\" \"銀河娛樂城\" \"百樂門舞廳\" \"BUBBLE CAFE\" \"萬豪麻雀館\" \"CITY LIGHTS BAR\" \"瑞祥香燭莊\" \"文記文具\" \"GOLDEN JADE HOTEL\" \"LOVELY BEAUTY\" \"合興百貨\" \"興旺電器\" And the background is warm yellow street and with all stores' lights on."]},{"id":132,"type":"SaveImage","pos":[3490.458251953125,-2310.1875],"size":[501.4586181640625,394.3281555175781],"flags":{},"order":34,"mode":4,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":159},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.63"},"widgets_values":["ComfyUI"]},{"id":110,"type":"JSONParserNode","pos":[2018.6490478515625,-779.5770263671875],"size":[400,200],"flags":{},"order":15,"mode":0,"inputs":[{"localized_name":"json_string","name":"json_string","type":"STRING","widget":{"name":"json_string"},"link":153},{"localized_name":"path","name":"path","type":"STRING","widget":{"name":"path"},"link":null}],"outputs":[{"localized_name":"parsed_data","name":"parsed_data","type":"STRING","links":[128]},{"localized_name":"array_size","name":"array_size","type":"INT","links":[]}],"properties":{"cnr_id":"comfyui-simple-json-node","ver":"1.1.0","Node name for S&R":"JSONParserNode"},"widgets_values":["{\n  \"id\": \"princess-pretty-bell\",\n  \"pages\": [\n    {\n      \"text\": \"In the sunny kingdom of Glimmerwick, where flowers sang lullabies and rivers sparkled with gold, lived a princess named Pretty Bell. She wasn’t named for her looks—though she did have twinkling eyes and hair like spun moonlight—but because she loved to ring her tiny silver bell at dawn, waking the whole castle with cheerful chimes.\",\n      \"pageNumber\": 1,\n      \"imagePrompt\": \"A cheerful young princess with long, silvery-white hair and bright blue eyes stands on a sunlit balcony of a pastel-colored castle with floating flower gardens below. She holds a small, delicate silver bell, smiling as golden sunlight glimmers off its surface. Butterflies flutter around her, and tiny glowing flowers bloom in the air. The sky is a soft pink and yellow, with fluffy clouds shaped like hearts. [a gentle, shimmering dragon with pastel wings and a kind face flies nearby, watching her with curiosity].\",\n      \"charactersPresent\": [\n        \"Princess Pretty Bell\",\n        \"A gentle, shimmering dragon\"\n      ],\n      \"isMainCharacterPresent\": true\n    },\n    {\n      \"text\": \"One morning, the bell stopped ringing. Not because Pretty Bell forgot—but because the magical bell had vanished! The castle was silent. The flowers drooped. Even the sun seemed to frown.\",\n      \"pageNumber\": 2,\n      \"imagePrompt\": \"Princess Pretty Bell kneels on the stone floor of a quiet castle hall, her hands clutching an empty space where her silver bell once hung. The once-bright chandelier now dims, and the enchanted flowers in the hallway have lost their glow. A small, worried expression on her face as she looks around. [a tiny, grumpy-looking gnome with a red hat and oversized spectacles peers from behind a tapestry, holding a tiny magnifying glass].\",\n      \"charactersPresent\": [\n        \"Princess Pretty Bell\",\n        \"A tiny, grumpy-looking gnome\"\n      ],\n      \"isMainCharacterPresent\": true\n    },\n    {\n      \"text\": \"Determined to find her bell, Pretty Bell packed a satchel with a map, a loaf of honey bread, and her favorite storybook. She set off through the Whispering Woods, where trees hummed secrets and mushrooms blinked like eyes.\",\n      \"pageNumber\": 3,\n      \"imagePrompt\": \"Princess Pretty Bell walks through a magical forest with glowing mushrooms lighting the path. Trees with smiling bark and glowing leaves sway gently. She wears a light blue dress with golden stars and carries a satchel. A small, friendly fox with silver-tipped fur follows her, sniffing the air. [a mischievous squirrel with a tiny crown and a backpack hops from branch to branch above her].\",\n      \"charactersPresent\": [\n        \"Princess Pretty Bell\",\n        \"A small, friendly fox\",\n        \"A mischievous squirrel\"\n      ],\n      \"isMainCharacterPresent\": true\n    },\n    {\n      \"text\": \"At the heart of the woods, she met a shy, moss-covered creature who whispered, 'The bell is lost in the Sky Hollow, guarded by the Cloud Cat. But only kindness can win it back.'\",\n      \"pageNumber\": 4,\n      \"imagePrompt\": \"Princess Pretty Bell stands before a glowing, moss-covered creature with large, gentle eyes and tiny green leaves growing from its head. They sit on a giant mushroom in a glowing clearing. Above them, a swirling sky hollow glows with pastel clouds. A fluffy, silver cat with cloud-like fur and glowing blue eyes watches from a floating island. [a tiny, curious owl with round glasses perches on a glowing toadstool nearby].\",\n      \"charactersPresent\": [\n        \"Princess Pretty Bell\",\n        \"A moss-covered creature\",\n        \"A Cloud Cat\",\n        \"A tiny, curious owl\"\n      ],\n      \"isMainCharacterPresent\": true\n    },\n    {\n      \"text\": \"To reach the Cloud Cat, Pretty Bell had to cross the Bridge of Laughter, where every step made her giggle. She laughed so hard she almost fell—until she remembered: her bell wasn’t just a toy. It was her heart’s song.\",\n      \"pageNumber\": 5,\n      \"imagePrompt\": \"Princess Pretty Bell walks across a rainbow bridge made of giggles, with floating giggles forming bubbles in the air. The bridge pulses with joy, and the ground trembles with laughter. She’s laughing uncontrollably, clutching her stomach, but still manages to keep her balance. The Cloud Cat watches from a cloud island above, smiling. [a pair of giggling twin butterflies flit beside her].\",\n      \"charactersPresent\": [\n        \"Princess Pretty Bell\",\n        \"A Cloud Cat\",\n        \"A pair of giggling twin butterflies\"\n      ],\n      \"isMainCharacterPresent\": true\n    },\n    {\n      \"text\": \"When she finally reached the Cloud Cat, she didn’t ask for the bell. Instead, she sang the song her mother used to hum—the one that made the stars dance. The Cloud Cat blinked, then gently placed the silver bell into her hands.\",\n      \"pageNumber\": 6,\n      \"imagePrompt\": \"Princess Pretty Bell sits on a fluffy cloud island, softly singing with her eyes closed. Golden light swirls around her as she sings. The Cloud Cat leans forward, eyes wide with wonder, placing the silver bell into her hands. The sky glows with dancing stars and shimmering constellations. [a tiny, glowing firefly with a tiny crown floats above her head].\",\n      \"charactersPresent\": [\n        \"Princess Pretty Bell\",\n        \"A Cloud Cat\",\n        \"A tiny, glowing firefly\"\n      ],\n      \"isMainCharacterPresent\": true\n    },\n    {\n      \"text\": \"Back at the castle, Pretty Bell rang her bell once more. The flowers burst into song, the rivers sparkled brighter, and the whole kingdom danced. And from that day on, the bell didn’t just ring—it remembered every kind act, every brave heart, every joyful moment.\",\n      \"pageNumber\": 7,\n      \"imagePrompt\": \"Princess Pretty Bell stands on the castle balcony, ringing her silver bell. The entire kingdom comes alive—dancing flowers, singing birds, laughing children, and even the castle walls glow with joy. The sky is full of dancing stars and floating musical notes. [a gentle, shimmering dragon flies in a joyful loop around the castle, followed by a trail of glittering sparkles].\",\n      \"charactersPresent\": [\n        \"Princess Pretty Bell\",\n        \"A gentle, shimmering dragon\"\n      ],\n      \"isMainCharacterPresent\": true\n    }\n  ],\n  \"metadata\": {\n    \"theme\": \"Kindness, Courage, and the Power of Joy\",\n    \"title\": \"Princess Pretty Bell and the Bell of Kindness\",\n    \"ageRange\": \"4-8\",\n    \"characters\": [\n      \"Princess Pretty Bell\",\n      \"A gentle, shimmering dragon\",\n      \"A moss-covered creature\",\n      \"A Cloud Cat\",\n      \"A tiny, grumpy-looking gnome\",\n      \"A small, friendly fox\",\n      \"A mischievous squirrel\",\n      \"A tiny, curious owl\",\n      \"A pair of giggling twin butterflies\",\n      \"A tiny, glowing firefly\"\n    ],\n    \"bookSummary\": \"When Princess Pretty Bell’s magical bell disappears, she embarks on a whimsical journey through enchanted lands to find it. Along the way, she learns that true magic lies not in the object, but in kindness, courage, and the joy she brings to others. With help from forest friends and a heart full of song, she returns home to restore harmony to her kingdom.\",\n    \"storyPrompt\": \"A cheerful princess whose magical bell has vanished must journey through enchanted lands to find it, discovering that kindness and joy are the real magic.\",\n    \"coverImagePrompt\": \"Princess Pretty Bell stands in the center of a glowing, magical meadow, holding her silver bell high. Around her, flowers bloom in song, butterflies dance, and a gentle dragon flies above. The sky is a swirl of pastel colors with stars and musical notes floating in the air. [a glowing, whimsical castle floats in the background with golden turrets].\",\n    \"styleReferencePrompt\": \"bright watercolor and playful cartoon\",\n    \"mainCharacterDescriptivePrompt\": \"Princess Pretty Bell is a young girl with long, silvery-white hair that glimmers like moonlight, bright blue eyes full of wonder, and a soft, kind smile. She wears a flowing blue dress with golden star patterns and a small silver bell charm on her belt. Her movements are gentle, and her presence radiates warmth and joy. She is brave, curious, and deeply kind-hearted.\"\n  }\n}","pages"]},{"id":113,"type":"JSONParserNode","pos":[2447.1826171875,-658.1094360351562],"size":[400,200],"flags":{},"order":26,"mode":0,"inputs":[{"localized_name":"json_string","name":"json_string","type":"STRING","widget":{"name":"json_string"},"link":122},{"localized_name":"path","name":"path","type":"STRING","widget":{"name":"path"},"link":null}],"outputs":[{"localized_name":"parsed_data","name":"parsed_data","type":"STRING","links":[139]},{"localized_name":"array_size","name":"array_size","type":"INT","links":[]}],"properties":{"cnr_id":"comfyui-simple-json-node","ver":"1.1.0","Node name for S&R":"JSONParserNode"},"widgets_values":["","imagePrompt"]},{"id":121,"type":"JSONParserNode","pos":[2458.11328125,-406.04351806640625],"size":[400,200],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"json_string","name":"json_string","type":"STRING","widget":{"name":"json_string"},"link":134},{"localized_name":"path","name":"path","type":"STRING","widget":{"name":"path"},"link":null}],"outputs":[{"localized_name":"parsed_data","name":"parsed_data","type":"STRING","links":[138]},{"localized_name":"array_size","name":"array_size","type":"INT","links":[]}],"properties":{"cnr_id":"comfyui-simple-json-node","ver":"1.1.0","Node name for S&R":"JSONParserNode"},"widgets_values":["","metadata.styleReferencePrompt"]},{"id":120,"type":"StringConcatenate","pos":[2965.979736328125,-495.8946228027344],"size":[400,200],"flags":{},"order":30,"mode":0,"inputs":[{"localized_name":"string_a","name":"string_a","type":"STRING","widget":{"name":"string_a"},"link":139},{"localized_name":"string_b","name":"string_b","type":"STRING","widget":{"name":"string_b"},"link":138},{"localized_name":"delimiter","name":"delimiter","type":"STRING","widget":{"name":"delimiter"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[137]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.63","Node name for S&R":"StringConcatenate"},"widgets_values":["","",""]},{"id":111,"type":"JSONArrayIteratorNode","pos":[2447.9775390625,-908.5772705078125],"size":[400,200],"flags":{},"order":21,"mode":0,"inputs":[{"localized_name":"json_input","name":"json_input","type":"STRING","widget":{"name":"json_input"},"link":128},{"localized_name":"index","name":"index","type":"INT","widget":{"name":"index"},"link":null},{"localized_name":"mode","name":"mode","type":"COMBO","widget":{"name":"mode"},"link":null}],"outputs":[{"localized_name":"item","name":"item","type":"STRING","links":[122]},{"localized_name":"current_index","name":"current_index","type":"INT","links":null},{"localized_name":"total_items","name":"total_items","type":"INT","links":null}],"properties":{"cnr_id":"comfyui-simple-json-node","ver":"1.1.0","Node name for S&R":"JSONArrayIteratorNode"},"widgets_values":["",3,"fixed"]},{"id":119,"type":"PrimitiveString","pos":[1370.75,-1340.000244140625],"size":[270,58],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"STRING","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[130,131,134,147,148,149,153,157,158]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.63","Node name for S&R":"PrimitiveString"},"widgets_values":["{   \"id\": \"story_princess_penny_001\",   \"pages\": [     {       \"text\": \"Princess Penny loved glitter and gold,\\nAnd stories of dragons and knights of old.\\nShe wore a big dress with a bow on the back,\\nBut hidden beneath was her favorite sack!\",       \"pageNumber\": 1,       \"imagePrompt\": \"A bright, sunny royal bedroom. [Princess Penny, a cute 5-year-old girl with curly strawberry-blonde hair, wearing a puffy pink gown and a sparkling tiara] is kneeling on the floor, looking mischievous. She is peeking under her frilly bed where she is hiding a rugged canvas tool bag. The room is filled with stuffed animals and ribbons.\",       \"charactersPresent\": [         \"Princess Penny\"       ],       \"isMainCharacterPresent\": true     },     {       \"text\": \"Inside the sack were a hammer and wrench,\\nShe loved building forts and fixing a bench.\\n'A princess,' said Dad, 'should sit on a throne!'\\nBut Penny preferred building things on her own.\",       \"pageNumber\": 2,       \"imagePrompt\": \"Close up on [Princess Penny] holding a silver wrench up to the light, admiring it. She is wearing her tool belt over her fancy dress. In the background, slightly out of focus, [The King, a round man with a white beard and a large golden crown] looks confused but kindly, holding a teacup.\",       \"charactersPresent\": [         \"Princess Penny\",         \"The King\"       ],       \"isMainCharacterPresent\": true     },     {       \"text\": \"One sunny morning, a distinct CRACK and POP,\\nThe Royal Parade came to a sudden stop!\\nThe carriage had broken, a wheel rolled away,\\n'Oh no!' cried the King, 'This ruins the day!'\",       \"pageNumber\": 3,       \"imagePrompt\": \"A chaotic scene on a cobblestone street. A fancy golden carriage is tilted to one side because a wheel has fallen off. The wheel is rolling into the foreground. [The King] is throwing his hands in the air in panic. Confetti is falling, but everyone looks worried.\",       \"charactersPresent\": [         \"The King\"       ],       \"isMainCharacterPresent\": false     },     {       \"text\": \"The Royal Mechanic was stuck in a tree,\\n(Rescuing a cat who couldn’t get free).\\nThe King pulled his beard and let out a wail,\\n'Without a mechanic, the parade is a fail!'\",       \"pageNumber\": 4,       \"imagePrompt\": \"A split view. On one side, [The King] is weeping into a handkerchief next to the broken carriage. On the other side/background, a mechanic in blue coveralls is stuck high up in an apple tree, trying to reach a frightened white kitten.\",       \"charactersPresent\": [         \"The King\",         \"Royal Mechanic\",         \"Cat\"       ],       \"isMainCharacterPresent\": false     },     {       \"text\": \"Then Penny stepped forward, her tiara on straight,\\n'Don't worry, Daddy! The parade won't be late!'\\nShe grabbed her tools and rolled up her sleeves,\\nAnd dove right into the pile of leaves.\",       \"pageNumber\": 5,       \"imagePrompt\": \"Low angle hero shot of [Princess Penny]. She looks determined and brave. She is rolling up the puffy sleeves of her gown. She is wearing her leather tool belt. [The King] looks down at her in surprise. The background is the sunny park with autumn leaves on the ground.\",       \"charactersPresent\": [         \"Princess Penny\",         \"The King\"       ],       \"isMainCharacterPresent\": true     },     {       \"text\": \"She twisted the bolts and banged on the steel,\\nShe put back the spokes and greased up the wheel.\\nHer nose got a smudge, her dress got a tear,\\nBut Princess Penny didn't even care.\",       \"pageNumber\": 6,       \"imagePrompt\": \"Action shot. [Princess Penny] is lying on her back under the golden carriage. She is using a wrench to tighten a bolt. There is a smudge of black grease on her cheek and nose. Her dress is getting dirty, but she is smiling and focused.\",       \"charactersPresent\": [         \"Princess Penny\"       ],       \"isMainCharacterPresent\": true     },     {       \"text\": \"With a final strong turn, the wheel stayed in place!\\nA giant smile spread across the King's face.\\n'You did it!' he cheered, 'You fixed up the ride!\\nMy clever Princess, I'm bursting with pride!'\",       \"pageNumber\": 7,       \"imagePrompt\": \"[Princess Penny] stands up, wiping her hands on a rag. The carriage is level and fixed behind her. [The King] is lifting her up in a big hug, looking incredibly happy and proud. The crowd of townspeople in the background is cheering.\",       \"charactersPresent\": [         \"Princess Penny\",         \"The King\"       ],       \"isMainCharacterPresent\": true     },     {       \"text\": \"So remember this lesson, if you wear a crown,\\nOr if you wear sneakers and run around town:\\nYou can be fancy and skillful too,\\nThere’s nothing a clever kid cannot do!\",       \"pageNumber\": 8,       \"imagePrompt\": \"The Grand Parade in motion. [Princess Penny] is sitting in the driver's seat of the carriage holding the reins, waving to the crowd with a wrench in her hand. [The King] sits in the back waving. Confetti fills the air. The style is celebratory and vibrant.\",       \"charactersPresent\": [         \"Princess Penny\",         \"The King\"       ],       \"isMainCharacterPresent\": true     }   ],   \"metadata\": {     \"theme\": \"Breaking stereotypes, problem-solving, self-confidence\",     \"title\": \"Princess Penny's Wrench\",     \"ageRange\": \"5 years old\",     \"characters\": [       \"Princess Penny\",       \"The King\",       \"Mechanic\"     ],     \"bookSummary\": \"Princess Penny loves being a princess, but she also loves mechanics. When the Royal Carriage breaks down right before the big parade, Penny is the only one who can fix it, proving that you can be pretty and practical at the same time.\",     \"storyPrompt\": \"Write a rhyming story for a 5-year-old about a Princess who saves the day not with magic, but by fixing a broken carriage with tools.\",     \"coverImagePrompt\": \"A vibrant book cover featuring [Princess Penny, a cute girl in a pink gown and tiara] holding a large silver wrench triumphantly above her head. She has a grease smudge on her nose. Behind her is a golden carriage. The title 'Princess Penny's Wrench' is written in bubbly, sparkly gold letters.\",     \"styleReferencePrompt\": \"3D Pixar-style digital illustration, vibrant colors, soft lighting, expressive character faces, detailed textures on fabrics and metals, storybook aesthetic.\",     \"mainCharacterDescriptivePrompt\": \"[Princess Penny, a cute 5-year-old girl with curly strawberry-blonde hair, wearing a puffy pink gown, a sparkling tiara, but also wearing a brown leather tool belt and sturdy purple boots]\"   } }"]},{"id":117,"type":"ShowText|pysssss","pos":[3404.368408203125,-493.96539306640625],"size":[572.3087158203125,206.79103088378906],"flags":{},"order":33,"mode":0,"inputs":[{"localized_name":"text","name":"text","type":"STRING","link":137}],"outputs":[{"localized_name":"STRING","name":"STRING","shape":6,"type":"STRING","links":[140]}],"properties":{"cnr_id":"comfyui-custom-scripts","ver":"f2838ed5e59de4d73cde5c98354b87a8d3200190","Node name for S&R":"ShowText|pysssss"},"widgets_values":["A split view. On one side, [The King] is weeping into a handkerchief next to the broken carriage. On the other side/background, a mechanic in blue coveralls is stuck high up in an apple tree, trying to reach a frightened white kitten.3D Pixar-style digital illustration, vibrant colors, soft lighting, expressive character faces, detailed textures on fabrics and metals, storybook aesthetic."]},{"id":112,"type":"bca16656-42a6-439d-9e78-75ecbd8746ed","pos":[3897.0205078125,-913.6939697265625],"size":[576.7478637695312,146.31683349609375],"flags":{},"order":35,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":165},{"name":"prompt","type":"STRING","widget":{"name":"prompt"},"link":140},{"name":"image_1","type":"IMAGE","link":161},{"name":"image_2","type":"IMAGE","link":162}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.63"},"widgets_values":[""]},{"id":135,"type":"LoadImage","pos":[3477.479248046875,-902.092529296875],"size":[274.080078125,314],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[162,167]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.63","Node name for S&R":"LoadImage"},"widgets_values":["ComfyUI_00117_.png","image"]},{"id":134,"type":"LoadImage","pos":[3176.092041015625,-901.0346069335938],"size":[274.080078125,314],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[161,168]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.63","Node name for S&R":"LoadImage"},"widgets_values":["ComfyUI_00100_.png","image"]},{"id":137,"type":"1e92de83-40f6-4eb1-b0be-a6e7d7fd50cf","pos":[3898.172119140625,-719.16650390625],"size":[576.7478637695312,146.31683349609375],"flags":{},"order":18,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":168},{"name":"prompt","type":"STRING","widget":{"name":"prompt"},"link":null},{"name":"image_1","type":"IMAGE","link":167}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[169]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.63"},"widgets_values":[""]},{"id":115,"type":"SaveImage","pos":[4545.31884765625,-872.2503662109375],"size":[270,270],"flags":{},"order":23,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":169},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.63"},"widgets_values":["ComfyUI"]},{"id":138,"type":"73dfeb4a-3c97-4492-9c11-2f29edd71136","pos":[3996.5087890625,-495.3065185546875],"size":[576.7478637695312,146.31683349609375],"flags":{},"order":7,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":170},{"name":"prompt","type":"STRING","widget":{"name":"prompt"},"link":null}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.63"},"widgets_values":[""]},{"id":118,"type":"LoadImage","pos":[2878.08349609375,-907.6272583007812],"size":[274.080078125,314],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[165,170]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.63","Node name for S&R":"LoadImage"},"widgets_values":["ComfyUI_00086_.png","image"]}],"links":[[18,17,0,27,0,"OLLAMA_CONNECTIVITY"],[24,31,0,27,1,"OLLAMA_OPTIONS"],[116,107,0,108,0,"IMAGE"],[122,111,0,113,0,"STRING"],[128,110,0,111,0,"STRING"],[130,119,0,5,0,"STRING"],[131,119,0,73,0,"STRING"],[134,119,0,121,0,"STRING"],[137,120,0,117,0,"STRING"],[138,121,0,120,1,"STRING"],[139,113,0,120,0,"STRING"],[140,117,0,112,1,"STRING"],[142,109,0,122,0,"IMAGE"],[143,123,0,107,0,"IMAGE"],[144,124,0,109,0,"STRING"],[145,73,0,124,0,"STRING"],[146,125,0,124,1,"STRING"],[147,119,0,125,0,"STRING"],[148,119,0,33,0,"STRING"],[149,119,0,126,0,"STRING"],[150,126,0,127,1,"STRING"],[151,33,0,127,0,"STRING"],[152,127,0,107,1,"STRING"],[153,119,0,110,0,"STRING"],[154,128,0,133,0,"STRING"],[155,133,0,130,0,"STRING"],[156,129,0,130,1,"STRING"],[157,119,0,128,0,"STRING"],[158,119,0,129,0,"STRING"],[159,131,0,132,0,"IMAGE"],[160,130,0,131,0,"STRING"],[161,134,0,112,2,"IMAGE"],[162,135,0,112,3,"IMAGE"],[164,130,0,136,0,"STRING"],[165,118,0,112,0,"IMAGE"],[167,135,0,137,2,"IMAGE"],[168,134,0,137,0,"IMAGE"],[169,137,0,115,0,"IMAGE"],[170,118,0,138,0,"IMAGE"]],"groups":[{"id":12,"title":"Story Generation","bounding":[660.4706420898438,-1417.700927734375,670.9146728515625,1214.8433837890625],"color":"#3f789e","font_size":24,"flags":{}},{"id":13,"title":"Cover Image Generation","bounding":[2056.405517578125,-1812.5711669921875,1958.784912109375,751.8643798828125],"color":"#3f789e","font_size":24,"flags":{}},{"id":14,"title":"Page(s) Image Generation","bounding":[2002.1279296875,-991.8045654296875,2823.237548828125,711.1126708984375],"color":"#3f789e","font_size":24,"flags":{}},{"id":16,"title":"Main Character Image Generation","bounding":[2018.6094970703125,-3030.8525390625,1967.1400146484375,609.9824829101562],"color":"#3f789e","font_size":24,"flags":{}},{"id":18,"title":"Other Character Generation","bounding":[2021.7052001953125,-2396.677490234375,1960.3040771484375,576.08740234375],"color":"#3f789e","font_size":24,"flags":{}}],"definitions":{"subgraphs":[{"id":"1059b46b-73be-4cb4-bf7d-0a911d460aa1","version":1,"state":{"lastGroupId":20,"lastNodeId":106,"lastLinkId":116,"lastRerouteId":0},"revision":0,"config":{},"name":"Image Edit","inputNode":{"id":-10,"bounding":[3490.454833984375,12.23126220703125,120,80]},"outputNode":{"id":-20,"bounding":[6590.45458984375,12.23126220703125,120,60]},"inputs":[{"id":"c6986867-63ed-42d3-ac67-9b39514e1dbd","name":"image","type":"IMAGE","linkIds":[114],"pos":{"0":3590.454833984375,"1":32.23126220703125}},{"id":"bc6762e4-0cdd-4799-828d-a073bfa43274","name":"prompt","type":"STRING","linkIds":[115],"pos":{"0":3590.454833984375,"1":52.23126220703125}}],"outputs":[{"id":"8520a6e1-6e00-43e0-9561-bbbe94265f5c","name":"IMAGE","type":"IMAGE","linkIds":[116],"pos":{"0":6610.45458984375,"1":32.23126220703125}}],"widgets":[],"nodes":[{"id":86,"type":"CFGNorm","pos":[5250.45458984375,-487.76873779296875],"size":[290,60],"flags":{},"order":12,"mode":4,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":91},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null}],"outputs":[{"localized_name":"patched_model","name":"patched_model","type":"MODEL","links":[96]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.50","Node name for S&R":"CFGNorm","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"ue_properties":{"widget_ue_connectable":{"strength":true}}},"widgets_values":[1]},{"id":88,"type":"VAELoader","pos":[4260.45458984375,-147.76873779296875],"size":[330,60],"flags":{},"order":0,"mode":4,"inputs":[{"localized_name":"vae_name","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":0,"links":[93,102,104,109]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"VAELoader","models":[{"name":"qwen_image_vae.safetensors","url":"https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/resolve/main/split_files/vae/qwen_image_vae.safetensors","directory":"vae"}],"enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":["qwen_image_vae.safetensors"]},{"id":89,"type":"CLIPLoader","pos":[4260.45458984375,-307.76873779296875],"size":[330,110],"flags":{},"order":1,"mode":4,"inputs":[{"localized_name":"clip_name","name":"clip_name","type":"COMBO","widget":{"name":"clip_name"},"link":null},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null},{"localized_name":"device","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null}],"outputs":[{"localized_name":"CLIP","name":"CLIP","type":"CLIP","slot_index":0,"links":[103,108]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"CLIPLoader","models":[{"name":"qwen_2.5_vl_7b_fp8_scaled.safetensors","url":"https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/resolve/main/split_files/text_encoders/qwen_2.5_vl_7b_fp8_scaled.safetensors","directory":"text_encoders"}],"enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":["qwen_2.5_vl_7b_fp8_scaled.safetensors","qwen_image","default"]},{"id":90,"type":"ModelSamplingAuraFlow","pos":[5250.45458984375,-597.7687377929688],"size":[290,60],"flags":{},"order":11,"mode":4,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":94},{"localized_name":"shift","name":"shift","type":"FLOAT","widget":{"name":"shift"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[91]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"ModelSamplingAuraFlow","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":[3]},{"id":91,"type":"LoraLoaderModelOnly","pos":[4270.45458984375,-427.76873779296875],"size":[310,82],"flags":{},"order":10,"mode":4,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":95},{"localized_name":"lora_name","name":"lora_name","type":"COMBO","widget":{"name":"lora_name"},"link":null},{"localized_name":"strength_model","name":"strength_model","type":"FLOAT","widget":{"name":"strength_model"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[94]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.50","Node name for S&R":"LoraLoaderModelOnly","models":[{"name":"Qwen-Image-Lightning-4steps-V1.0.safetensors","url":"https://huggingface.co/lightx2v/Qwen-Image-Lightning/resolve/main/Qwen-Image-Lightning-4steps-V1.0.safetensors","directory":"loras"}],"enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"ue_properties":{"widget_ue_connectable":{"lora_name":true,"strength_model":true}}},"widgets_values":["Qwen-Image-Lightning-4steps-V1.0.safetensors",1]},{"id":92,"type":"KSampler","pos":[5250.45458984375,-377.76873779296875],"size":[300,474],"flags":{},"order":14,"mode":4,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":96},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":97},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":98},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":99},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[92]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"KSampler","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":[1071970261503091,"randomize",4,1,"euler","simple",1]},{"id":93,"type":"UNETLoader","pos":[4260.45458984375,-567.7687377929688],"size":[330,90],"flags":{},"order":2,"mode":4,"inputs":[{"localized_name":"unet_name","name":"unet_name","type":"COMBO","widget":{"name":"unet_name"},"link":null},{"localized_name":"weight_dtype","name":"weight_dtype","type":"COMBO","widget":{"name":"weight_dtype"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[95]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"UNETLoader","models":[{"name":"qwen_image_edit_2509_fp8_e4m3fn.safetensors","url":"https://huggingface.co/Comfy-Org/Qwen-Image-Edit_ComfyUI/resolve/main/split_files/diffusion_models/qwen_image_edit_2509_fp8_e4m3fn.safetensors","directory":"diffusion_models"}],"enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":["qwen_image_edit_2509_fp8_e4m3fn.safetensors","default"]},{"id":94,"type":"SaveImage","pos":[5580.45458984375,-497.76873779296875],"size":[950,1040],"flags":{},"order":15,"mode":4,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":100},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"SaveImage","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":["ComfyUI"]},{"id":97,"type":"EmptySD3LatentImage","pos":[5260.45458984375,392.23126220703125],"size":[270,106],"flags":{},"order":3,"mode":4,"inputs":[{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":null},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":null},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","links":[]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.59","Node name for S&R":"EmptySD3LatentImage"},"widgets_values":[1024,1024,1]},{"id":98,"type":"VAEEncode","pos":[5000.45458984375,432.23126220703125],"size":[140,46],"flags":{},"order":16,"mode":4,"inputs":[{"localized_name":"pixels","name":"pixels","type":"IMAGE","link":101},{"localized_name":"vae","name":"vae","type":"VAE","link":102}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","links":[99]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.50","Node name for S&R":"VAEEncode","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"ue_properties":{"widget_ue_connectable":{}}},"widgets_values":[]},{"id":99,"type":"TextEncodeQwenImageEditPlus","pos":[4730.45458984375,-287.76873779296875],"size":[400,200],"flags":{},"order":17,"mode":4,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":103},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":104},{"localized_name":"image1","name":"image1","shape":7,"type":"IMAGE","link":105},{"localized_name":"image2","name":"image2","shape":7,"type":"IMAGE","link":106},{"localized_name":"image3","name":"image3","shape":7,"type":"IMAGE","link":107},{"localized_name":"prompt","name":"prompt","type":"STRING","widget":{"name":"prompt"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[98]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.59","Node name for S&R":"TextEncodeQwenImageEditPlus"},"widgets_values":[""],"color":"#223","bgcolor":"#335"},{"id":103,"type":"MarkdownNote","pos":[5240.45458984375,562.2312622070312],"size":[330,90],"flags":{},"order":4,"mode":4,"inputs":[],"outputs":[],"title":"Note: About image size","properties":{},"widgets_values":["You can use the latent from the **EmptySD3LatentImage** to replace **VAE Encode**, so you can customize the image size."],"color":"#432","bgcolor":"#653"},{"id":104,"type":"MarkdownNote","pos":[5250.45458984375,142.23126220703125],"size":[300,160],"flags":{},"order":5,"mode":4,"inputs":[],"outputs":[],"title":"Note: KSampler settings","properties":{},"widgets_values":["You can test and find the best setting by yourself. The following table is for reference.\n\n| Model            | Steps | CFG |\n|---------------------|---------------|---------------|\n| Offical             | 50               | 4.0               \n| fp8_e4m3fn             | 20                | 2.5               |\n| fp8_e4m3fn + 4steps LoRA    | 4               | 1.0               |\n"],"color":"#432","bgcolor":"#653"},{"id":105,"type":"MarkdownNote","pos":[3670.454833984375,-607.7687377929688],"size":[550,550],"flags":{},"order":6,"mode":4,"inputs":[],"outputs":[],"title":"Model links","properties":{"widget_ue_connectable":{}},"widgets_values":["[Tutorial](https://docs.comfy.org/tutorials/image/qwen/qwen-image-edit) | [教程](https://docs.comfy.org/zh-CN/tutorials/image/qwen/qwen-image-edit)\n\n\n## Model links\n\nYou can find all the models on [Comfy-Org/Qwen-Image_ComfyUI](https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/tree/main) and  [Comfy-Org/Qwen-Image-Edit_ComfyUI](https://huggingface.co/Comfy-Org/Qwen-Image-Edit_ComfyUI) \n\n**Diffusion model**\n\n- [qwen_image_edit_2509_fp8_e4m3fn.safetensors](https://huggingface.co/Comfy-Org/Qwen-Image-Edit_ComfyUI/resolve/main/split_files/diffusion_models/qwen_image_edit_2509_fp8_e4m3fn.safetensors)\n\n**LoRA**\n\n- [Qwen-Image-Lightning-4steps-V1.0.safetensors](https://huggingface.co/lightx2v/Qwen-Image-Lightning/resolve/main/Qwen-Image-Lightning-4steps-V1.0.safetensors)\n\n**Text encoder**\n\n- [qwen_2.5_vl_7b_fp8_scaled.safetensors](https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/resolve/main/split_files/text_encoders/qwen_2.5_vl_7b_fp8_scaled.safetensors)\n\n**VAE**\n\n- [qwen_image_vae.safetensors](https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/resolve/main/split_files/vae/qwen_image_vae.safetensors)\n\nModel Storage Location\n\n```\n📂 ComfyUI/\n├── 📂 models/\n│   ├── 📂 diffusion_models/\n│   │   └── qwen_image_edit_2509_fp8_e4m3fn.safetensors\n│   ├── 📂 loras/\n│   │   └── Qwen-Image-Lightning-4steps-V1.0.safetensors\n│   ├── 📂 vae/\n│   │   └── qwen_image_vae.safetensors\n│   └── 📂 text_encoders/\n│       └── qwen_2.5_vl_7b_fp8_scaled.safetensors\n```\n"],"color":"#432","bgcolor":"#653"},{"id":106,"type":"MarkdownNote","pos":[4270.45458984375,562.2312622070312],"size":[290,140],"flags":{},"order":7,"mode":4,"inputs":[],"outputs":[],"properties":{},"widgets_values":["This node is to avoid bad output results caused by excessively large input image sizes. Because when we input one image, we use the size of that input image.\n\nThe **TextEncodeQwenImageEditPlus** will scale your input to 1024×104 pixels. We use the size of your first input image. This node is to avoid having an input image size that is too large (such as 3000×3000 pixels), which could bring bad results."],"color":"#432","bgcolor":"#653"},{"id":102,"type":"ImageScaleToTotalPixels","pos":[4280.45458984375,422.23126220703125],"size":[270,82],"flags":{},"order":19,"mode":4,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":114},{"localized_name":"upscale_method","name":"upscale_method","type":"COMBO","widget":{"name":"upscale_method"},"link":null},{"localized_name":"megapixels","name":"megapixels","type":"FLOAT","widget":{"name":"megapixels"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[101,105,110]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.50","Node name for S&R":"ImageScaleToTotalPixels","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"ue_properties":{"widget_ue_connectable":{"upscale_method":true,"megapixels":true}}},"widgets_values":["lanczos",1]},{"id":100,"type":"TextEncodeQwenImageEditPlus","pos":[4730.45458984375,-557.7687377929688],"size":[400,200],"flags":{},"order":18,"mode":4,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":108},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":109},{"localized_name":"image1","name":"image1","shape":7,"type":"IMAGE","link":110},{"localized_name":"image2","name":"image2","shape":7,"type":"IMAGE","link":111},{"localized_name":"image3","name":"image3","shape":7,"type":"IMAGE","link":112},{"localized_name":"prompt","name":"prompt","type":"STRING","widget":{"name":"prompt"},"link":115}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[97]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.59","Node name for S&R":"TextEncodeQwenImageEditPlus"},"widgets_values":[""],"color":"#232","bgcolor":"#353"},{"id":87,"type":"VAEDecode","pos":[5590.45458984375,-597.7687377929688],"size":[210,46],"flags":{"collapsed":false},"order":13,"mode":4,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":92},{"localized_name":"vae","name":"vae","type":"VAE","link":93}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[100,116]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"VAEDecode","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":[]},{"id":95,"type":"LoadImage","pos":[4280.46484375,56.97294998168945],"size":[274.080078125,314.0000305175781],"flags":{},"order":8,"mode":4,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[106,111]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.50","Node name for S&R":"LoadImage","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"ue_properties":{"widget_ue_connectable":{"image":true,"upload":true}}},"widgets_values":["0_1 (5).png","image"]},{"id":96,"type":"LoadImage","pos":[4874.00048828125,52.5335807800293],"size":[274.080078125,314.0000305175781],"flags":{},"order":9,"mode":4,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[107,112]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.50","Node name for S&R":"LoadImage","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"ue_properties":{"widget_ue_connectable":{"image":true,"upload":true}}},"widgets_values":["pose.png","image"]}],"groups":[{"id":17,"title":"Step1 - Load models","bounding":[4240.45458984375,-637.7687377929688,370,570],"color":"#3f789e","font_size":24,"flags":{}},{"id":18,"title":"Step 2 - Upload image for editing","bounding":[4240.45458984375,-37.76873016357422,970,550],"color":"#3f789e","font_size":24,"flags":{}},{"id":19,"title":"Step 4 - Prompt","bounding":[4640.45458984375,-637.7687377929688,570,570],"color":"#3f789e","font_size":24,"flags":{}},{"id":20,"title":"Step3 - Image Size","bounding":[5240.45458984375,312.23126220703125,310,200],"color":"#3f789e","font_size":24,"flags":{}}],"links":[{"id":91,"origin_id":90,"origin_slot":0,"target_id":86,"target_slot":0,"type":"MODEL"},{"id":92,"origin_id":92,"origin_slot":0,"target_id":87,"target_slot":0,"type":"LATENT"},{"id":93,"origin_id":88,"origin_slot":0,"target_id":87,"target_slot":1,"type":"VAE"},{"id":94,"origin_id":91,"origin_slot":0,"target_id":90,"target_slot":0,"type":"MODEL"},{"id":95,"origin_id":93,"origin_slot":0,"target_id":91,"target_slot":0,"type":"MODEL"},{"id":96,"origin_id":86,"origin_slot":0,"target_id":92,"target_slot":0,"type":"MODEL"},{"id":97,"origin_id":100,"origin_slot":0,"target_id":92,"target_slot":1,"type":"CONDITIONING"},{"id":98,"origin_id":99,"origin_slot":0,"target_id":92,"target_slot":2,"type":"CONDITIONING"},{"id":99,"origin_id":98,"origin_slot":0,"target_id":92,"target_slot":3,"type":"LATENT"},{"id":100,"origin_id":87,"origin_slot":0,"target_id":94,"target_slot":0,"type":"IMAGE"},{"id":101,"origin_id":102,"origin_slot":0,"target_id":98,"target_slot":0,"type":"IMAGE"},{"id":102,"origin_id":88,"origin_slot":0,"target_id":98,"target_slot":1,"type":"VAE"},{"id":103,"origin_id":89,"origin_slot":0,"target_id":99,"target_slot":0,"type":"CLIP"},{"id":104,"origin_id":88,"origin_slot":0,"target_id":99,"target_slot":1,"type":"VAE"},{"id":105,"origin_id":102,"origin_slot":0,"target_id":99,"target_slot":2,"type":"IMAGE"},{"id":106,"origin_id":95,"origin_slot":0,"target_id":99,"target_slot":3,"type":"IMAGE"},{"id":107,"origin_id":96,"origin_slot":0,"target_id":99,"target_slot":4,"type":"IMAGE"},{"id":108,"origin_id":89,"origin_slot":0,"target_id":100,"target_slot":0,"type":"CLIP"},{"id":109,"origin_id":88,"origin_slot":0,"target_id":100,"target_slot":1,"type":"VAE"},{"id":110,"origin_id":102,"origin_slot":0,"target_id":100,"target_slot":2,"type":"IMAGE"},{"id":111,"origin_id":95,"origin_slot":0,"target_id":100,"target_slot":3,"type":"IMAGE"},{"id":112,"origin_id":96,"origin_slot":0,"target_id":100,"target_slot":4,"type":"IMAGE"},{"id":114,"origin_id":-10,"origin_slot":0,"target_id":102,"target_slot":0,"type":"IMAGE"},{"id":115,"origin_id":-10,"origin_slot":1,"target_id":100,"target_slot":5,"type":"STRING"},{"id":116,"origin_id":87,"origin_slot":0,"target_id":-20,"target_slot":0,"type":"IMAGE"}],"extra":{}},{"id":"2e8677d0-e698-4a7e-a759-bdc06e447768","version":1,"state":{"lastGroupId":20,"lastNodeId":108,"lastLinkId":116,"lastRerouteId":0},"revision":0,"config":{},"name":"Image Generate","inputNode":{"id":-10,"bounding":[2657.563720703125,-1356.9807434082031,120,60]},"outputNode":{"id":-20,"bounding":[4667.16015625,-1356.9807434082031,120,60]},"inputs":[{"id":"865503b5-ba87-4d33-bb9d-b172e187a6b9","name":"text","type":"STRING","linkIds":[68],"localized_name":"text","pos":{"0":2757.563720703125,"1":-1336.980712890625}}],"outputs":[{"id":"6a05d357-5841-403d-b3fa-5a2221e7abdb","name":"IMAGE","type":"IMAGE","linkIds":[115],"localized_name":"IMAGE","pos":{"0":4687.16015625,"1":-1336.980712890625}}],"widgets":[],"nodes":[{"id":63,"type":"LoraLoaderModelOnly","pos":[3346.310302734375,-1612.94482421875],"size":[270,82],"flags":{},"order":4,"mode":4,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":57},{"localized_name":"lora_name","name":"lora_name","type":"COMBO","widget":{"name":"lora_name"},"link":null},{"localized_name":"strength_model","name":"strength_model","type":"FLOAT","widget":{"name":"strength_model"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[58]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.49","Node name for S&R":"LoraLoaderModelOnly","models":[{"name":"Qwen-Image-Lightning-8steps-V1.0.safetensors","url":"https://huggingface.co/lightx2v/Qwen-Image-Lightning/resolve/main/Qwen-Image-Lightning-8steps-V1.0.safetensors","directory":"loras"}]},"widgets_values":["Qwen-Image-Lightning-8steps-V1.0.safetensors",1]},{"id":64,"type":"ModelSamplingAuraFlow","pos":[3736.309326171875,-1662.94482421875],"size":[300,58],"flags":{},"order":6,"mode":4,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":58},{"localized_name":"shift","name":"shift","type":"FLOAT","widget":{"name":"shift"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[59]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"ModelSamplingAuraFlow","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":[3.1000000000000005]},{"id":70,"type":"CLIPTextEncode","pos":[3276.310791015625,-1432.94482421875],"size":[422.84503173828125,164.31304931640625],"flags":{},"order":8,"mode":4,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":63},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":68}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[60]}],"title":"CLIP Text Encode (Positive Prompt)","properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"CLIPTextEncode","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":["\"A vibrant, warm neon-lit street scene in Hong Kong at the afternoon, with a mix of colorful Chinese and English signs glowing brightly. The atmosphere is lively, cinematic, and rain-washed with reflections on the pavement. The colors are vivid, full of pink, blue, red, and green hues. Crowded buildings with overlapping neon signs. 1980s Hong Kong style. Signs include:\n\"龍鳳冰室\" \"金華燒臘\" \"HAPPY HAIR\" \"鴻運茶餐廳\" \"EASY BAR\" \"永發魚蛋粉\" \"添記粥麵\" \"SUNSHINE MOTEL\" \"美都餐室\" \"富記糖水\" \"太平館\" \"雅芳髮型屋\" \"STAR KTV\" \"銀河娛樂城\" \"百樂門舞廳\" \"BUBBLE CAFE\" \"萬豪麻雀館\" \"CITY LIGHTS BAR\" \"瑞祥香燭莊\" \"文記文具\" \"GOLDEN JADE HOTEL\" \"LOVELY BEAUTY\" \"合興百貨\" \"興旺電器\" And the background is warm yellow street and with all stores' lights on."],"color":"#232","bgcolor":"#353"},{"id":67,"type":"UNETLoader","pos":[2909.485595703125,-1626.072265625],"size":[330,90],"flags":{},"order":0,"mode":4,"inputs":[{"localized_name":"unet_name","name":"unet_name","type":"COMBO","widget":{"name":"unet_name"},"link":null},{"localized_name":"weight_dtype","name":"weight_dtype","type":"COMBO","widget":{"name":"weight_dtype"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[57]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"UNETLoader","models":[{"name":"qwen_image_fp8_e4m3fn.safetensors","url":"https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/resolve/main/split_files/diffusion_models/qwen_image_fp8_e4m3fn.safetensors","directory":"diffusion_models"}],"enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":["qwen_image_fp8_e4m3fn.safetensors","default"]},{"id":68,"type":"VAELoader","pos":[2909.485595703125,-1336.0718994140625],"size":[330,60],"flags":{},"order":1,"mode":4,"inputs":[{"localized_name":"vae_name","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":0,"links":[66]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"VAELoader","models":[{"name":"qwen_image_vae.safetensors","url":"https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/resolve/main/split_files/vae/qwen_image_vae.safetensors","directory":"vae"}],"enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":["qwen_image_vae.safetensors"]},{"id":66,"type":"EmptySD3LatentImage","pos":[2936.51123046875,-1167.0994873046875],"size":[270,106],"flags":{},"order":2,"mode":4,"inputs":[{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":null},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":null},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","links":[62]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"EmptySD3LatentImage","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":[1328,1328,1]},{"id":62,"type":"CLIPTextEncode","pos":[3276.310791015625,-1232.9447021484375],"size":[425.27801513671875,180.6060791015625],"flags":{},"order":5,"mode":4,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":56},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[61]}],"title":"CLIP Text Encode (Negative Prompt)","properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"CLIPTextEncode","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":[""],"color":"#322","bgcolor":"#533"},{"id":69,"type":"CLIPLoader","pos":[2909.485595703125,-1486.0721435546875],"size":[330,110],"flags":{},"order":3,"mode":4,"inputs":[{"localized_name":"clip_name","name":"clip_name","type":"COMBO","widget":{"name":"clip_name"},"link":null},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null},{"localized_name":"device","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null}],"outputs":[{"localized_name":"CLIP","name":"CLIP","type":"CLIP","slot_index":0,"links":[56,63]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"CLIPLoader","models":[{"name":"qwen_2.5_vl_7b_fp8_scaled.safetensors","url":"https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/resolve/main/split_files/text_encoders/qwen_2.5_vl_7b_fp8_scaled.safetensors","directory":"text_encoders"}],"enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":["qwen_2.5_vl_7b_fp8_scaled.safetensors","qwen_image","default"]},{"id":65,"type":"KSampler","pos":[3736.309326171875,-1552.94482421875],"size":[300,474],"flags":{},"order":7,"mode":4,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":59},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":60},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":61},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":62},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[65]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"KSampler","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":[34647198323972,"randomize",20,2.5,"euler","simple",1]},{"id":72,"type":"VAEDecode","pos":[4191.19873046875,-1648.90283203125],"size":[210,46],"flags":{"collapsed":false},"order":10,"mode":4,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":65},{"localized_name":"vae","name":"vae","type":"VAE","link":66}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[64,115]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"VAEDecode","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":[]},{"id":71,"type":"SaveImage","pos":[4068.418212890625,-1547.376708984375],"size":[490,600],"flags":{},"order":9,"mode":4,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":64},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"SaveImage","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":["ComfyUI"]}],"groups":[{"id":12,"title":"Image Generator","bounding":[2837.563720703125,-1731.399169921875,1769.5963134765625,808.8368530273438],"color":"#3f789e","font_size":24,"flags":{}},{"id":13,"title":"Step1 - Load models","bounding":[2899.485595703125,-1696.0721435546875,350,433.6000061035156],"color":"#3f789e","font_size":24,"flags":{}},{"id":14,"title":"Step2 - Image size","bounding":[2896.310546875,-1242.9447021484375,350,210],"color":"#3f789e","font_size":24,"flags":{}},{"id":15,"title":"Lightx2v 8steps LoRA","bounding":[3266.311279296875,-1692.9447021484375,450,170],"color":"#3f789e","font_size":24,"flags":{}},{"id":16,"title":"Step3 - Prompt","bounding":[3266.311279296875,-1512.9447021484375,450,470],"color":"#3f789e","font_size":24,"flags":{}}],"links":[{"id":57,"origin_id":67,"origin_slot":0,"target_id":63,"target_slot":0,"type":"MODEL"},{"id":58,"origin_id":63,"origin_slot":0,"target_id":64,"target_slot":0,"type":"MODEL"},{"id":63,"origin_id":69,"origin_slot":0,"target_id":70,"target_slot":0,"type":"CLIP"},{"id":56,"origin_id":69,"origin_slot":0,"target_id":62,"target_slot":0,"type":"CLIP"},{"id":59,"origin_id":64,"origin_slot":0,"target_id":65,"target_slot":0,"type":"MODEL"},{"id":60,"origin_id":70,"origin_slot":0,"target_id":65,"target_slot":1,"type":"CONDITIONING"},{"id":61,"origin_id":62,"origin_slot":0,"target_id":65,"target_slot":2,"type":"CONDITIONING"},{"id":62,"origin_id":66,"origin_slot":0,"target_id":65,"target_slot":3,"type":"LATENT"},{"id":65,"origin_id":65,"origin_slot":0,"target_id":72,"target_slot":0,"type":"LATENT"},{"id":66,"origin_id":68,"origin_slot":0,"target_id":72,"target_slot":1,"type":"VAE"},{"id":64,"origin_id":72,"origin_slot":0,"target_id":71,"target_slot":0,"type":"IMAGE"},{"id":68,"origin_id":-10,"origin_slot":0,"target_id":70,"target_slot":1,"type":"STRING"},{"id":115,"origin_id":72,"origin_slot":0,"target_id":-20,"target_slot":0,"type":"IMAGE"}],"extra":{}},{"id":"bca16656-42a6-439d-9e78-75ecbd8746ed","version":1,"state":{"lastGroupId":20,"lastNodeId":108,"lastLinkId":123,"lastRerouteId":0},"revision":0,"config":{},"name":"Image Edit","inputNode":{"id":-10,"bounding":[3490.454833984375,12.23126220703125,120,120]},"outputNode":{"id":-20,"bounding":[6590.45458984375,12.23126220703125,120,60]},"inputs":[{"id":"c6986867-63ed-42d3-ac67-9b39514e1dbd","name":"image","type":"IMAGE","linkIds":[123],"pos":{"0":3590.454833984375,"1":32.23126220703125}},{"id":"bc6762e4-0cdd-4799-828d-a073bfa43274","name":"prompt","type":"STRING","linkIds":[115],"pos":{"0":3590.454833984375,"1":52.23126220703125}},{"id":"15973b1e-15e1-47df-afc6-08de5b8f5896","name":"image_1","type":"IMAGE","linkIds":[117],"pos":{"0":3590.454833984375,"1":72.23126220703125}},{"id":"883096b0-5107-45a4-9909-47be7a4b7dad","name":"image_2","type":"IMAGE","linkIds":[118],"pos":{"0":3590.454833984375,"1":92.23126220703125}}],"outputs":[{"id":"8520a6e1-6e00-43e0-9561-bbbe94265f5c","name":"IMAGE","type":"IMAGE","linkIds":[116],"pos":{"0":6610.45458984375,"1":32.23126220703125}}],"widgets":[],"nodes":[{"id":86,"type":"CFGNorm","pos":[5250.45458984375,-487.76873779296875],"size":[290,60],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":91},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null}],"outputs":[{"localized_name":"patched_model","name":"patched_model","type":"MODEL","links":[96]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.50","Node name for S&R":"CFGNorm","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"ue_properties":{"widget_ue_connectable":{"strength":true}}},"widgets_values":[1]},{"id":88,"type":"VAELoader","pos":[4260.45458984375,-147.76873779296875],"size":[330,60],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"vae_name","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":0,"links":[93,102,104,109]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"VAELoader","models":[{"name":"qwen_image_vae.safetensors","url":"https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/resolve/main/split_files/vae/qwen_image_vae.safetensors","directory":"vae"}],"enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":["qwen_image_vae.safetensors"]},{"id":89,"type":"CLIPLoader","pos":[4260.45458984375,-307.76873779296875],"size":[330,110],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"clip_name","name":"clip_name","type":"COMBO","widget":{"name":"clip_name"},"link":null},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null},{"localized_name":"device","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null}],"outputs":[{"localized_name":"CLIP","name":"CLIP","type":"CLIP","slot_index":0,"links":[103,108]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"CLIPLoader","models":[{"name":"qwen_2.5_vl_7b_fp8_scaled.safetensors","url":"https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/resolve/main/split_files/text_encoders/qwen_2.5_vl_7b_fp8_scaled.safetensors","directory":"text_encoders"}],"enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":["qwen_2.5_vl_7b_fp8_scaled.safetensors","qwen_image","default"]},{"id":90,"type":"ModelSamplingAuraFlow","pos":[5250.45458984375,-597.7687377929688],"size":[290,60],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":94},{"localized_name":"shift","name":"shift","type":"FLOAT","widget":{"name":"shift"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[91]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"ModelSamplingAuraFlow","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":[3]},{"id":91,"type":"LoraLoaderModelOnly","pos":[4270.45458984375,-427.76873779296875],"size":[310,82],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":95},{"localized_name":"lora_name","name":"lora_name","type":"COMBO","widget":{"name":"lora_name"},"link":null},{"localized_name":"strength_model","name":"strength_model","type":"FLOAT","widget":{"name":"strength_model"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[94]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.50","Node name for S&R":"LoraLoaderModelOnly","models":[{"name":"Qwen-Image-Lightning-4steps-V1.0.safetensors","url":"https://huggingface.co/lightx2v/Qwen-Image-Lightning/resolve/main/Qwen-Image-Lightning-4steps-V1.0.safetensors","directory":"loras"}],"enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"ue_properties":{"widget_ue_connectable":{"lora_name":true,"strength_model":true}}},"widgets_values":["Qwen-Image-Lightning-4steps-V1.0.safetensors",1]},{"id":93,"type":"UNETLoader","pos":[4260.45458984375,-567.7687377929688],"size":[330,90],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"unet_name","name":"unet_name","type":"COMBO","widget":{"name":"unet_name"},"link":null},{"localized_name":"weight_dtype","name":"weight_dtype","type":"COMBO","widget":{"name":"weight_dtype"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[95]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"UNETLoader","models":[{"name":"qwen_image_edit_2509_fp8_e4m3fn.safetensors","url":"https://huggingface.co/Comfy-Org/Qwen-Image-Edit_ComfyUI/resolve/main/split_files/diffusion_models/qwen_image_edit_2509_fp8_e4m3fn.safetensors","directory":"diffusion_models"}],"enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":["qwen_image_edit_2509_fp8_e4m3fn.safetensors","default"]},{"id":94,"type":"SaveImage","pos":[5580.45458984375,-497.76873779296875],"size":[950,1040],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":100},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"SaveImage","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":["ComfyUI"]},{"id":97,"type":"EmptySD3LatentImage","pos":[5260.45458984375,392.23126220703125],"size":[270,106],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":null},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":null},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","links":[]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.59","Node name for S&R":"EmptySD3LatentImage"},"widgets_values":[1024,1024,1]},{"id":98,"type":"VAEEncode","pos":[5000.45458984375,432.23126220703125],"size":[140,46],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"pixels","name":"pixels","type":"IMAGE","link":101},{"localized_name":"vae","name":"vae","type":"VAE","link":102}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","links":[99]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.50","Node name for S&R":"VAEEncode","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"ue_properties":{"widget_ue_connectable":{}}},"widgets_values":[]},{"id":103,"type":"MarkdownNote","pos":[5240.45458984375,562.2312622070312],"size":[330,90],"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[],"title":"Note: About image size","properties":{},"widgets_values":["You can use the latent from the **EmptySD3LatentImage** to replace **VAE Encode**, so you can customize the image size."],"color":"#432","bgcolor":"#653"},{"id":104,"type":"MarkdownNote","pos":[5250.45458984375,142.23126220703125],"size":[300,160],"flags":{},"order":5,"mode":0,"inputs":[],"outputs":[],"title":"Note: KSampler settings","properties":{},"widgets_values":["You can test and find the best setting by yourself. The following table is for reference.\n\n| Model            | Steps | CFG |\n|---------------------|---------------|---------------|\n| Offical             | 50               | 4.0               \n| fp8_e4m3fn             | 20                | 2.5               |\n| fp8_e4m3fn + 4steps LoRA    | 4               | 1.0               |\n"],"color":"#432","bgcolor":"#653"},{"id":105,"type":"MarkdownNote","pos":[3670.454833984375,-607.7687377929688],"size":[550,550],"flags":{},"order":6,"mode":0,"inputs":[],"outputs":[],"title":"Model links","properties":{"widget_ue_connectable":{}},"widgets_values":["[Tutorial](https://docs.comfy.org/tutorials/image/qwen/qwen-image-edit) | [教程](https://docs.comfy.org/zh-CN/tutorials/image/qwen/qwen-image-edit)\n\n\n## Model links\n\nYou can find all the models on [Comfy-Org/Qwen-Image_ComfyUI](https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/tree/main) and  [Comfy-Org/Qwen-Image-Edit_ComfyUI](https://huggingface.co/Comfy-Org/Qwen-Image-Edit_ComfyUI) \n\n**Diffusion model**\n\n- [qwen_image_edit_2509_fp8_e4m3fn.safetensors](https://huggingface.co/Comfy-Org/Qwen-Image-Edit_ComfyUI/resolve/main/split_files/diffusion_models/qwen_image_edit_2509_fp8_e4m3fn.safetensors)\n\n**LoRA**\n\n- [Qwen-Image-Lightning-4steps-V1.0.safetensors](https://huggingface.co/lightx2v/Qwen-Image-Lightning/resolve/main/Qwen-Image-Lightning-4steps-V1.0.safetensors)\n\n**Text encoder**\n\n- [qwen_2.5_vl_7b_fp8_scaled.safetensors](https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/resolve/main/split_files/text_encoders/qwen_2.5_vl_7b_fp8_scaled.safetensors)\n\n**VAE**\n\n- [qwen_image_vae.safetensors](https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/resolve/main/split_files/vae/qwen_image_vae.safetensors)\n\nModel Storage Location\n\n```\n📂 ComfyUI/\n├── 📂 models/\n│   ├── 📂 diffusion_models/\n│   │   └── qwen_image_edit_2509_fp8_e4m3fn.safetensors\n│   ├── 📂 loras/\n│   │   └── Qwen-Image-Lightning-4steps-V1.0.safetensors\n│   ├── 📂 vae/\n│   │   └── qwen_image_vae.safetensors\n│   └── 📂 text_encoders/\n│       └── qwen_2.5_vl_7b_fp8_scaled.safetensors\n```\n"],"color":"#432","bgcolor":"#653"},{"id":106,"type":"MarkdownNote","pos":[4270.45458984375,562.2312622070312],"size":[290,140],"flags":{},"order":7,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["This node is to avoid bad output results caused by excessively large input image sizes. Because when we input one image, we use the size of that input image.\n\nThe **TextEncodeQwenImageEditPlus** will scale your input to 1024×104 pixels. We use the size of your first input image. This node is to avoid having an input image size that is too large (such as 3000×3000 pixels), which could bring bad results."],"color":"#432","bgcolor":"#653"},{"id":100,"type":"TextEncodeQwenImageEditPlus","pos":[4730.45458984375,-557.7687377929688],"size":[400,200],"flags":{},"order":16,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":108},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":109},{"localized_name":"image1","name":"image1","shape":7,"type":"IMAGE","link":110},{"localized_name":"image2","name":"image2","shape":7,"type":"IMAGE","link":119},{"localized_name":"image3","name":"image3","shape":7,"type":"IMAGE","link":120},{"localized_name":"prompt","name":"prompt","type":"STRING","widget":{"name":"prompt"},"link":115}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[97]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.59","Node name for S&R":"TextEncodeQwenImageEditPlus"},"widgets_values":[""],"color":"#232","bgcolor":"#353"},{"id":87,"type":"VAEDecode","pos":[5590.45458984375,-597.7687377929688],"size":[210,46],"flags":{"collapsed":false},"order":11,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":92},{"localized_name":"vae","name":"vae","type":"VAE","link":93}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[100,116]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"VAEDecode","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":[]},{"id":108,"type":"ImageScaleToTotalPixels","pos":[4284.25146484375,228.3581085205078],"size":[270,82],"flags":{},"order":19,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":118},{"localized_name":"upscale_method","name":"upscale_method","type":"COMBO","widget":{"name":"upscale_method"},"link":null},{"localized_name":"megapixels","name":"megapixels","type":"FLOAT","widget":{"name":"megapixels"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[120]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.50","Node name for S&R":"ImageScaleToTotalPixels","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"ue_properties":{"widget_ue_connectable":{"upscale_method":true,"megapixels":true}}},"widgets_values":["lanczos",1]},{"id":107,"type":"ImageScaleToTotalPixels","pos":[4285.2041015625,88.7642822265625],"size":[270,82],"flags":{},"order":18,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":117},{"localized_name":"upscale_method","name":"upscale_method","type":"COMBO","widget":{"name":"upscale_method"},"link":null},{"localized_name":"megapixels","name":"megapixels","type":"FLOAT","widget":{"name":"megapixels"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[119,121]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.50","Node name for S&R":"ImageScaleToTotalPixels","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"ue_properties":{"widget_ue_connectable":{"upscale_method":true,"megapixels":true}}},"widgets_values":["lanczos",1]},{"id":102,"type":"ImageScaleToTotalPixels","pos":[4301.71044921875,373.4263000488281],"size":[270,82],"flags":{},"order":17,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":123},{"localized_name":"upscale_method","name":"upscale_method","type":"COMBO","widget":{"name":"upscale_method"},"link":null},{"localized_name":"megapixels","name":"megapixels","type":"FLOAT","widget":{"name":"megapixels"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[101,105,110,122]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.50","Node name for S&R":"ImageScaleToTotalPixels","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"ue_properties":{"widget_ue_connectable":{"upscale_method":true,"megapixels":true}}},"widgets_values":["lanczos",1]},{"id":99,"type":"TextEncodeQwenImageEditPlus","pos":[4730.45458984375,-287.76873779296875],"size":[400,200],"flags":{},"order":15,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":103},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":104},{"localized_name":"image1","name":"image1","shape":7,"type":"IMAGE","link":105},{"localized_name":"image2","name":"image2","shape":7,"type":"IMAGE","link":121},{"localized_name":"image3","name":"image3","shape":7,"type":"IMAGE","link":122},{"localized_name":"prompt","name":"prompt","type":"STRING","widget":{"name":"prompt"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[98]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.59","Node name for S&R":"TextEncodeQwenImageEditPlus"},"widgets_values":["the princess"],"color":"#223","bgcolor":"#335"},{"id":92,"type":"KSampler","pos":[5250.45458984375,-377.76873779296875],"size":[300,474],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":96},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":97},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":98},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":99},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[92]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"KSampler","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":[18123143124536,"randomize",6,1,"euler","simple",1]}],"groups":[{"id":17,"title":"Step1 - Load models","bounding":[4240.45458984375,-637.7687377929688,370,570],"color":"#3f789e","font_size":24,"flags":{}},{"id":18,"title":"Step 2 - Upload image for editing","bounding":[4240.45458984375,-37.76873016357422,970,550],"color":"#3f789e","font_size":24,"flags":{}},{"id":19,"title":"Step 4 - Prompt","bounding":[4640.45458984375,-637.7687377929688,570,570],"color":"#3f789e","font_size":24,"flags":{}},{"id":20,"title":"Step3 - Image Size","bounding":[5240.45458984375,312.23126220703125,310,200],"color":"#3f789e","font_size":24,"flags":{}}],"links":[{"id":91,"origin_id":90,"origin_slot":0,"target_id":86,"target_slot":0,"type":"MODEL"},{"id":92,"origin_id":92,"origin_slot":0,"target_id":87,"target_slot":0,"type":"LATENT"},{"id":93,"origin_id":88,"origin_slot":0,"target_id":87,"target_slot":1,"type":"VAE"},{"id":94,"origin_id":91,"origin_slot":0,"target_id":90,"target_slot":0,"type":"MODEL"},{"id":95,"origin_id":93,"origin_slot":0,"target_id":91,"target_slot":0,"type":"MODEL"},{"id":96,"origin_id":86,"origin_slot":0,"target_id":92,"target_slot":0,"type":"MODEL"},{"id":97,"origin_id":100,"origin_slot":0,"target_id":92,"target_slot":1,"type":"CONDITIONING"},{"id":98,"origin_id":99,"origin_slot":0,"target_id":92,"target_slot":2,"type":"CONDITIONING"},{"id":99,"origin_id":98,"origin_slot":0,"target_id":92,"target_slot":3,"type":"LATENT"},{"id":100,"origin_id":87,"origin_slot":0,"target_id":94,"target_slot":0,"type":"IMAGE"},{"id":101,"origin_id":102,"origin_slot":0,"target_id":98,"target_slot":0,"type":"IMAGE"},{"id":102,"origin_id":88,"origin_slot":0,"target_id":98,"target_slot":1,"type":"VAE"},{"id":103,"origin_id":89,"origin_slot":0,"target_id":99,"target_slot":0,"type":"CLIP"},{"id":104,"origin_id":88,"origin_slot":0,"target_id":99,"target_slot":1,"type":"VAE"},{"id":105,"origin_id":102,"origin_slot":0,"target_id":99,"target_slot":2,"type":"IMAGE"},{"id":108,"origin_id":89,"origin_slot":0,"target_id":100,"target_slot":0,"type":"CLIP"},{"id":109,"origin_id":88,"origin_slot":0,"target_id":100,"target_slot":1,"type":"VAE"},{"id":110,"origin_id":102,"origin_slot":0,"target_id":100,"target_slot":2,"type":"IMAGE"},{"id":115,"origin_id":-10,"origin_slot":1,"target_id":100,"target_slot":5,"type":"STRING"},{"id":116,"origin_id":87,"origin_slot":0,"target_id":-20,"target_slot":0,"type":"IMAGE"},{"id":117,"origin_id":-10,"origin_slot":2,"target_id":107,"target_slot":0,"type":"IMAGE"},{"id":118,"origin_id":-10,"origin_slot":3,"target_id":108,"target_slot":0,"type":"IMAGE"},{"id":119,"origin_id":107,"origin_slot":0,"target_id":100,"target_slot":3,"type":"IMAGE"},{"id":120,"origin_id":108,"origin_slot":0,"target_id":100,"target_slot":4,"type":"IMAGE"},{"id":121,"origin_id":107,"origin_slot":0,"target_id":99,"target_slot":3,"type":"IMAGE"},{"id":122,"origin_id":102,"origin_slot":0,"target_id":99,"target_slot":4,"type":"IMAGE"},{"id":123,"origin_id":-10,"origin_slot":0,"target_id":102,"target_slot":0,"type":"IMAGE"}],"extra":{}},{"id":"e916a009-db6c-459e-8b32-81186a6c4b1b","version":1,"state":{"lastGroupId":20,"lastNodeId":108,"lastLinkId":116,"lastRerouteId":0},"revision":0,"config":{},"name":"Image Generate","inputNode":{"id":-10,"bounding":[2657.563720703125,-1356.9807434082031,120,60]},"outputNode":{"id":-20,"bounding":[4667.16015625,-1356.9807434082031,120,60]},"inputs":[{"id":"865503b5-ba87-4d33-bb9d-b172e187a6b9","name":"text","type":"STRING","linkIds":[68],"localized_name":"text","pos":{"0":2757.563720703125,"1":-1336.980712890625}}],"outputs":[{"id":"6a05d357-5841-403d-b3fa-5a2221e7abdb","name":"IMAGE","type":"IMAGE","linkIds":[115],"localized_name":"IMAGE","pos":{"0":4687.16015625,"1":-1336.980712890625}}],"widgets":[],"nodes":[{"id":63,"type":"LoraLoaderModelOnly","pos":[3346.310302734375,-1612.94482421875],"size":[270,82],"flags":{},"order":4,"mode":4,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":57},{"localized_name":"lora_name","name":"lora_name","type":"COMBO","widget":{"name":"lora_name"},"link":null},{"localized_name":"strength_model","name":"strength_model","type":"FLOAT","widget":{"name":"strength_model"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[58]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.49","Node name for S&R":"LoraLoaderModelOnly","models":[{"name":"Qwen-Image-Lightning-8steps-V1.0.safetensors","url":"https://huggingface.co/lightx2v/Qwen-Image-Lightning/resolve/main/Qwen-Image-Lightning-8steps-V1.0.safetensors","directory":"loras"}]},"widgets_values":["Qwen-Image-Lightning-8steps-V1.0.safetensors",1]},{"id":64,"type":"ModelSamplingAuraFlow","pos":[3736.309326171875,-1662.94482421875],"size":[300,58],"flags":{},"order":6,"mode":4,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":58},{"localized_name":"shift","name":"shift","type":"FLOAT","widget":{"name":"shift"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[59]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"ModelSamplingAuraFlow","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":[3.1000000000000005]},{"id":70,"type":"CLIPTextEncode","pos":[3276.310791015625,-1432.94482421875],"size":[422.84503173828125,164.31304931640625],"flags":{},"order":8,"mode":4,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":63},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":68}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[60]}],"title":"CLIP Text Encode (Positive Prompt)","properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"CLIPTextEncode","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":["\"A vibrant, warm neon-lit street scene in Hong Kong at the afternoon, with a mix of colorful Chinese and English signs glowing brightly. The atmosphere is lively, cinematic, and rain-washed with reflections on the pavement. The colors are vivid, full of pink, blue, red, and green hues. Crowded buildings with overlapping neon signs. 1980s Hong Kong style. Signs include:\n\"龍鳳冰室\" \"金華燒臘\" \"HAPPY HAIR\" \"鴻運茶餐廳\" \"EASY BAR\" \"永發魚蛋粉\" \"添記粥麵\" \"SUNSHINE MOTEL\" \"美都餐室\" \"富記糖水\" \"太平館\" \"雅芳髮型屋\" \"STAR KTV\" \"銀河娛樂城\" \"百樂門舞廳\" \"BUBBLE CAFE\" \"萬豪麻雀館\" \"CITY LIGHTS BAR\" \"瑞祥香燭莊\" \"文記文具\" \"GOLDEN JADE HOTEL\" \"LOVELY BEAUTY\" \"合興百貨\" \"興旺電器\" And the background is warm yellow street and with all stores' lights on."],"color":"#232","bgcolor":"#353"},{"id":67,"type":"UNETLoader","pos":[2909.485595703125,-1626.072265625],"size":[330,90],"flags":{},"order":0,"mode":4,"inputs":[{"localized_name":"unet_name","name":"unet_name","type":"COMBO","widget":{"name":"unet_name"},"link":null},{"localized_name":"weight_dtype","name":"weight_dtype","type":"COMBO","widget":{"name":"weight_dtype"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[57]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"UNETLoader","models":[{"name":"qwen_image_fp8_e4m3fn.safetensors","url":"https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/resolve/main/split_files/diffusion_models/qwen_image_fp8_e4m3fn.safetensors","directory":"diffusion_models"}],"enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":["qwen_image_fp8_e4m3fn.safetensors","default"]},{"id":68,"type":"VAELoader","pos":[2909.485595703125,-1336.0718994140625],"size":[330,60],"flags":{},"order":1,"mode":4,"inputs":[{"localized_name":"vae_name","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":0,"links":[66]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"VAELoader","models":[{"name":"qwen_image_vae.safetensors","url":"https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/resolve/main/split_files/vae/qwen_image_vae.safetensors","directory":"vae"}],"enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":["qwen_image_vae.safetensors"]},{"id":66,"type":"EmptySD3LatentImage","pos":[2936.51123046875,-1167.0994873046875],"size":[270,106],"flags":{},"order":2,"mode":4,"inputs":[{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":null},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":null},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","links":[62]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"EmptySD3LatentImage","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":[1328,1328,1]},{"id":62,"type":"CLIPTextEncode","pos":[3276.310791015625,-1232.9447021484375],"size":[425.27801513671875,180.6060791015625],"flags":{},"order":5,"mode":4,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":56},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[61]}],"title":"CLIP Text Encode (Negative Prompt)","properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"CLIPTextEncode","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":[""],"color":"#322","bgcolor":"#533"},{"id":69,"type":"CLIPLoader","pos":[2909.485595703125,-1486.0721435546875],"size":[330,110],"flags":{},"order":3,"mode":4,"inputs":[{"localized_name":"clip_name","name":"clip_name","type":"COMBO","widget":{"name":"clip_name"},"link":null},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null},{"localized_name":"device","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null}],"outputs":[{"localized_name":"CLIP","name":"CLIP","type":"CLIP","slot_index":0,"links":[56,63]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"CLIPLoader","models":[{"name":"qwen_2.5_vl_7b_fp8_scaled.safetensors","url":"https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/resolve/main/split_files/text_encoders/qwen_2.5_vl_7b_fp8_scaled.safetensors","directory":"text_encoders"}],"enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":["qwen_2.5_vl_7b_fp8_scaled.safetensors","qwen_image","default"]},{"id":65,"type":"KSampler","pos":[3736.309326171875,-1552.94482421875],"size":[300,474],"flags":{},"order":7,"mode":4,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":59},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":60},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":61},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":62},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[65]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"KSampler","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":[282222202366239,"randomize",20,2.5,"euler","simple",1]},{"id":72,"type":"VAEDecode","pos":[4191.19873046875,-1648.90283203125],"size":[210,46],"flags":{"collapsed":false},"order":10,"mode":4,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":65},{"localized_name":"vae","name":"vae","type":"VAE","link":66}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[64,115]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"VAEDecode","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":[]},{"id":71,"type":"SaveImage","pos":[4068.418212890625,-1547.376708984375],"size":[490,600],"flags":{},"order":9,"mode":4,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":64},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"SaveImage","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":["ComfyUI"]}],"groups":[{"id":12,"title":"Image Generator","bounding":[2837.563720703125,-1731.399169921875,1769.5963134765625,808.8368530273438],"color":"#3f789e","font_size":24,"flags":{}},{"id":13,"title":"Step1 - Load models","bounding":[2899.485595703125,-1696.0721435546875,350,433.6000061035156],"color":"#3f789e","font_size":24,"flags":{}},{"id":14,"title":"Step2 - Image size","bounding":[2896.310546875,-1242.9447021484375,350,210],"color":"#3f789e","font_size":24,"flags":{}},{"id":15,"title":"Lightx2v 8steps LoRA","bounding":[3266.311279296875,-1692.9447021484375,450,170],"color":"#3f789e","font_size":24,"flags":{}},{"id":16,"title":"Step3 - Prompt","bounding":[3266.311279296875,-1512.9447021484375,450,470],"color":"#3f789e","font_size":24,"flags":{}}],"links":[{"id":57,"origin_id":67,"origin_slot":0,"target_id":63,"target_slot":0,"type":"MODEL"},{"id":58,"origin_id":63,"origin_slot":0,"target_id":64,"target_slot":0,"type":"MODEL"},{"id":63,"origin_id":69,"origin_slot":0,"target_id":70,"target_slot":0,"type":"CLIP"},{"id":56,"origin_id":69,"origin_slot":0,"target_id":62,"target_slot":0,"type":"CLIP"},{"id":59,"origin_id":64,"origin_slot":0,"target_id":65,"target_slot":0,"type":"MODEL"},{"id":60,"origin_id":70,"origin_slot":0,"target_id":65,"target_slot":1,"type":"CONDITIONING"},{"id":61,"origin_id":62,"origin_slot":0,"target_id":65,"target_slot":2,"type":"CONDITIONING"},{"id":62,"origin_id":66,"origin_slot":0,"target_id":65,"target_slot":3,"type":"LATENT"},{"id":65,"origin_id":65,"origin_slot":0,"target_id":72,"target_slot":0,"type":"LATENT"},{"id":66,"origin_id":68,"origin_slot":0,"target_id":72,"target_slot":1,"type":"VAE"},{"id":64,"origin_id":72,"origin_slot":0,"target_id":71,"target_slot":0,"type":"IMAGE"},{"id":68,"origin_id":-10,"origin_slot":0,"target_id":70,"target_slot":1,"type":"STRING"},{"id":115,"origin_id":72,"origin_slot":0,"target_id":-20,"target_slot":0,"type":"IMAGE"}],"extra":{}},{"id":"1e92de83-40f6-4eb1-b0be-a6e7d7fd50cf","version":1,"state":{"lastGroupId":20,"lastNodeId":108,"lastLinkId":123,"lastRerouteId":0},"revision":0,"config":{},"name":"Image Edit","inputNode":{"id":-10,"bounding":[3490.454833984375,12.23126220703125,120,100]},"outputNode":{"id":-20,"bounding":[6590.45458984375,12.23126220703125,120,60]},"inputs":[{"id":"c6986867-63ed-42d3-ac67-9b39514e1dbd","name":"image","type":"IMAGE","linkIds":[123],"pos":{"0":3590.454833984375,"1":32.23126220703125}},{"id":"bc6762e4-0cdd-4799-828d-a073bfa43274","name":"prompt","type":"STRING","linkIds":[115],"pos":{"0":3590.454833984375,"1":52.23126220703125}},{"id":"15973b1e-15e1-47df-afc6-08de5b8f5896","name":"image_1","type":"IMAGE","linkIds":[117],"pos":{"0":3590.454833984375,"1":72.23126220703125}}],"outputs":[{"id":"8520a6e1-6e00-43e0-9561-bbbe94265f5c","name":"IMAGE","type":"IMAGE","linkIds":[116],"pos":{"0":6610.45458984375,"1":32.23126220703125}}],"widgets":[],"nodes":[{"id":86,"type":"CFGNorm","pos":[5250.45458984375,-487.76873779296875],"size":[290,60],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":91},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null}],"outputs":[{"localized_name":"patched_model","name":"patched_model","type":"MODEL","links":[96]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.50","Node name for S&R":"CFGNorm","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"ue_properties":{"widget_ue_connectable":{"strength":true}}},"widgets_values":[1]},{"id":88,"type":"VAELoader","pos":[4260.45458984375,-147.76873779296875],"size":[330,60],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"vae_name","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":0,"links":[93,102,104,109]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"VAELoader","models":[{"name":"qwen_image_vae.safetensors","url":"https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/resolve/main/split_files/vae/qwen_image_vae.safetensors","directory":"vae"}],"enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":["qwen_image_vae.safetensors"]},{"id":89,"type":"CLIPLoader","pos":[4260.45458984375,-307.76873779296875],"size":[330,110],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"clip_name","name":"clip_name","type":"COMBO","widget":{"name":"clip_name"},"link":null},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null},{"localized_name":"device","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null}],"outputs":[{"localized_name":"CLIP","name":"CLIP","type":"CLIP","slot_index":0,"links":[103,108]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"CLIPLoader","models":[{"name":"qwen_2.5_vl_7b_fp8_scaled.safetensors","url":"https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/resolve/main/split_files/text_encoders/qwen_2.5_vl_7b_fp8_scaled.safetensors","directory":"text_encoders"}],"enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":["qwen_2.5_vl_7b_fp8_scaled.safetensors","qwen_image","default"]},{"id":90,"type":"ModelSamplingAuraFlow","pos":[5250.45458984375,-597.7687377929688],"size":[290,60],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":94},{"localized_name":"shift","name":"shift","type":"FLOAT","widget":{"name":"shift"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[91]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"ModelSamplingAuraFlow","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":[3]},{"id":91,"type":"LoraLoaderModelOnly","pos":[4270.45458984375,-427.76873779296875],"size":[310,82],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":95},{"localized_name":"lora_name","name":"lora_name","type":"COMBO","widget":{"name":"lora_name"},"link":null},{"localized_name":"strength_model","name":"strength_model","type":"FLOAT","widget":{"name":"strength_model"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[94]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.50","Node name for S&R":"LoraLoaderModelOnly","models":[{"name":"Qwen-Image-Lightning-4steps-V1.0.safetensors","url":"https://huggingface.co/lightx2v/Qwen-Image-Lightning/resolve/main/Qwen-Image-Lightning-4steps-V1.0.safetensors","directory":"loras"}],"enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"ue_properties":{"widget_ue_connectable":{"lora_name":true,"strength_model":true}}},"widgets_values":["Qwen-Image-Lightning-4steps-V1.0.safetensors",1]},{"id":93,"type":"UNETLoader","pos":[4260.45458984375,-567.7687377929688],"size":[330,90],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"unet_name","name":"unet_name","type":"COMBO","widget":{"name":"unet_name"},"link":null},{"localized_name":"weight_dtype","name":"weight_dtype","type":"COMBO","widget":{"name":"weight_dtype"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[95]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"UNETLoader","models":[{"name":"qwen_image_edit_2509_fp8_e4m3fn.safetensors","url":"https://huggingface.co/Comfy-Org/Qwen-Image-Edit_ComfyUI/resolve/main/split_files/diffusion_models/qwen_image_edit_2509_fp8_e4m3fn.safetensors","directory":"diffusion_models"}],"enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":["qwen_image_edit_2509_fp8_e4m3fn.safetensors","default"]},{"id":94,"type":"SaveImage","pos":[5580.45458984375,-497.76873779296875],"size":[950,1040],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":100},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"SaveImage","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":["ComfyUI"]},{"id":97,"type":"EmptySD3LatentImage","pos":[5260.45458984375,392.23126220703125],"size":[270,106],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":null},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":null},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","links":[]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.59","Node name for S&R":"EmptySD3LatentImage"},"widgets_values":[1024,1024,1]},{"id":98,"type":"VAEEncode","pos":[5000.45458984375,432.23126220703125],"size":[140,46],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"pixels","name":"pixels","type":"IMAGE","link":101},{"localized_name":"vae","name":"vae","type":"VAE","link":102}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","links":[99]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.50","Node name for S&R":"VAEEncode","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"ue_properties":{"widget_ue_connectable":{}}},"widgets_values":[]},{"id":103,"type":"MarkdownNote","pos":[5240.45458984375,562.2312622070312],"size":[330,90],"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[],"title":"Note: About image size","properties":{},"widgets_values":["You can use the latent from the **EmptySD3LatentImage** to replace **VAE Encode**, so you can customize the image size."],"color":"#432","bgcolor":"#653"},{"id":104,"type":"MarkdownNote","pos":[5250.45458984375,142.23126220703125],"size":[300,160],"flags":{},"order":5,"mode":0,"inputs":[],"outputs":[],"title":"Note: KSampler settings","properties":{},"widgets_values":["You can test and find the best setting by yourself. The following table is for reference.\n\n| Model            | Steps | CFG |\n|---------------------|---------------|---------------|\n| Offical             | 50               | 4.0               \n| fp8_e4m3fn             | 20                | 2.5               |\n| fp8_e4m3fn + 4steps LoRA    | 4               | 1.0               |\n"],"color":"#432","bgcolor":"#653"},{"id":105,"type":"MarkdownNote","pos":[3670.454833984375,-607.7687377929688],"size":[550,550],"flags":{},"order":6,"mode":0,"inputs":[],"outputs":[],"title":"Model links","properties":{"widget_ue_connectable":{}},"widgets_values":["[Tutorial](https://docs.comfy.org/tutorials/image/qwen/qwen-image-edit) | [教程](https://docs.comfy.org/zh-CN/tutorials/image/qwen/qwen-image-edit)\n\n\n## Model links\n\nYou can find all the models on [Comfy-Org/Qwen-Image_ComfyUI](https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/tree/main) and  [Comfy-Org/Qwen-Image-Edit_ComfyUI](https://huggingface.co/Comfy-Org/Qwen-Image-Edit_ComfyUI) \n\n**Diffusion model**\n\n- [qwen_image_edit_2509_fp8_e4m3fn.safetensors](https://huggingface.co/Comfy-Org/Qwen-Image-Edit_ComfyUI/resolve/main/split_files/diffusion_models/qwen_image_edit_2509_fp8_e4m3fn.safetensors)\n\n**LoRA**\n\n- [Qwen-Image-Lightning-4steps-V1.0.safetensors](https://huggingface.co/lightx2v/Qwen-Image-Lightning/resolve/main/Qwen-Image-Lightning-4steps-V1.0.safetensors)\n\n**Text encoder**\n\n- [qwen_2.5_vl_7b_fp8_scaled.safetensors](https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/resolve/main/split_files/text_encoders/qwen_2.5_vl_7b_fp8_scaled.safetensors)\n\n**VAE**\n\n- [qwen_image_vae.safetensors](https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/resolve/main/split_files/vae/qwen_image_vae.safetensors)\n\nModel Storage Location\n\n```\n📂 ComfyUI/\n├── 📂 models/\n│   ├── 📂 diffusion_models/\n│   │   └── qwen_image_edit_2509_fp8_e4m3fn.safetensors\n│   ├── 📂 loras/\n│   │   └── Qwen-Image-Lightning-4steps-V1.0.safetensors\n│   ├── 📂 vae/\n│   │   └── qwen_image_vae.safetensors\n│   └── 📂 text_encoders/\n│       └── qwen_2.5_vl_7b_fp8_scaled.safetensors\n```\n"],"color":"#432","bgcolor":"#653"},{"id":106,"type":"MarkdownNote","pos":[4270.45458984375,562.2312622070312],"size":[290,140],"flags":{},"order":7,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["This node is to avoid bad output results caused by excessively large input image sizes. Because when we input one image, we use the size of that input image.\n\nThe **TextEncodeQwenImageEditPlus** will scale your input to 1024×104 pixels. We use the size of your first input image. This node is to avoid having an input image size that is too large (such as 3000×3000 pixels), which could bring bad results."],"color":"#432","bgcolor":"#653"},{"id":100,"type":"TextEncodeQwenImageEditPlus","pos":[4730.45458984375,-557.7687377929688],"size":[400,200],"flags":{},"order":16,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":108},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":109},{"localized_name":"image1","name":"image1","shape":7,"type":"IMAGE","link":110},{"localized_name":"image2","name":"image2","shape":7,"type":"IMAGE","link":119},{"localized_name":"image3","name":"image3","shape":7,"type":"IMAGE","link":null},{"localized_name":"prompt","name":"prompt","type":"STRING","widget":{"name":"prompt"},"link":115}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[97]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.59","Node name for S&R":"TextEncodeQwenImageEditPlus"},"widgets_values":[""],"color":"#232","bgcolor":"#353"},{"id":87,"type":"VAEDecode","pos":[5590.45458984375,-597.7687377929688],"size":[210,46],"flags":{"collapsed":false},"order":11,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":92},{"localized_name":"vae","name":"vae","type":"VAE","link":93}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[100,116]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"VAEDecode","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":[]},{"id":107,"type":"ImageScaleToTotalPixels","pos":[4285.2041015625,88.7642822265625],"size":[270,82],"flags":{},"order":18,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":117},{"localized_name":"upscale_method","name":"upscale_method","type":"COMBO","widget":{"name":"upscale_method"},"link":null},{"localized_name":"megapixels","name":"megapixels","type":"FLOAT","widget":{"name":"megapixels"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[119,121]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.50","Node name for S&R":"ImageScaleToTotalPixels","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"ue_properties":{"widget_ue_connectable":{"upscale_method":true,"megapixels":true}}},"widgets_values":["lanczos",1]},{"id":102,"type":"ImageScaleToTotalPixels","pos":[4301.71044921875,373.4263000488281],"size":[270,82],"flags":{},"order":17,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":123},{"localized_name":"upscale_method","name":"upscale_method","type":"COMBO","widget":{"name":"upscale_method"},"link":null},{"localized_name":"megapixels","name":"megapixels","type":"FLOAT","widget":{"name":"megapixels"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[101,105,110]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.50","Node name for S&R":"ImageScaleToTotalPixels","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"ue_properties":{"widget_ue_connectable":{"upscale_method":true,"megapixels":true}}},"widgets_values":["lanczos",1]},{"id":92,"type":"KSampler","pos":[5250.45458984375,-377.76873779296875],"size":[300,474],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":96},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":97},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":98},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":99},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[92]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"KSampler","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":[18123143124536,"randomize",6,1,"euler","simple",1]},{"id":99,"type":"TextEncodeQwenImageEditPlus","pos":[4730.45458984375,-287.76873779296875],"size":[400,200],"flags":{},"order":15,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":103},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":104},{"localized_name":"image1","name":"image1","shape":7,"type":"IMAGE","link":105},{"localized_name":"image2","name":"image2","shape":7,"type":"IMAGE","link":121},{"localized_name":"image3","name":"image3","shape":7,"type":"IMAGE","link":null},{"localized_name":"prompt","name":"prompt","type":"STRING","widget":{"name":"prompt"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[98]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.59","Node name for S&R":"TextEncodeQwenImageEditPlus"},"widgets_values":["the princess"],"color":"#223","bgcolor":"#335"}],"groups":[{"id":17,"title":"Step1 - Load models","bounding":[4240.45458984375,-637.7687377929688,370,570],"color":"#3f789e","font_size":24,"flags":{}},{"id":18,"title":"Step 2 - Upload image for editing","bounding":[4240.45458984375,-37.76873016357422,970,550],"color":"#3f789e","font_size":24,"flags":{}},{"id":19,"title":"Step 4 - Prompt","bounding":[4640.45458984375,-637.7687377929688,570,570],"color":"#3f789e","font_size":24,"flags":{}},{"id":20,"title":"Step3 - Image Size","bounding":[5240.45458984375,312.23126220703125,310,200],"color":"#3f789e","font_size":24,"flags":{}}],"links":[{"id":91,"origin_id":90,"origin_slot":0,"target_id":86,"target_slot":0,"type":"MODEL"},{"id":92,"origin_id":92,"origin_slot":0,"target_id":87,"target_slot":0,"type":"LATENT"},{"id":93,"origin_id":88,"origin_slot":0,"target_id":87,"target_slot":1,"type":"VAE"},{"id":94,"origin_id":91,"origin_slot":0,"target_id":90,"target_slot":0,"type":"MODEL"},{"id":95,"origin_id":93,"origin_slot":0,"target_id":91,"target_slot":0,"type":"MODEL"},{"id":96,"origin_id":86,"origin_slot":0,"target_id":92,"target_slot":0,"type":"MODEL"},{"id":97,"origin_id":100,"origin_slot":0,"target_id":92,"target_slot":1,"type":"CONDITIONING"},{"id":98,"origin_id":99,"origin_slot":0,"target_id":92,"target_slot":2,"type":"CONDITIONING"},{"id":99,"origin_id":98,"origin_slot":0,"target_id":92,"target_slot":3,"type":"LATENT"},{"id":100,"origin_id":87,"origin_slot":0,"target_id":94,"target_slot":0,"type":"IMAGE"},{"id":101,"origin_id":102,"origin_slot":0,"target_id":98,"target_slot":0,"type":"IMAGE"},{"id":102,"origin_id":88,"origin_slot":0,"target_id":98,"target_slot":1,"type":"VAE"},{"id":103,"origin_id":89,"origin_slot":0,"target_id":99,"target_slot":0,"type":"CLIP"},{"id":104,"origin_id":88,"origin_slot":0,"target_id":99,"target_slot":1,"type":"VAE"},{"id":105,"origin_id":102,"origin_slot":0,"target_id":99,"target_slot":2,"type":"IMAGE"},{"id":108,"origin_id":89,"origin_slot":0,"target_id":100,"target_slot":0,"type":"CLIP"},{"id":109,"origin_id":88,"origin_slot":0,"target_id":100,"target_slot":1,"type":"VAE"},{"id":110,"origin_id":102,"origin_slot":0,"target_id":100,"target_slot":2,"type":"IMAGE"},{"id":115,"origin_id":-10,"origin_slot":1,"target_id":100,"target_slot":5,"type":"STRING"},{"id":116,"origin_id":87,"origin_slot":0,"target_id":-20,"target_slot":0,"type":"IMAGE"},{"id":117,"origin_id":-10,"origin_slot":2,"target_id":107,"target_slot":0,"type":"IMAGE"},{"id":119,"origin_id":107,"origin_slot":0,"target_id":100,"target_slot":3,"type":"IMAGE"},{"id":121,"origin_id":107,"origin_slot":0,"target_id":99,"target_slot":3,"type":"IMAGE"},{"id":123,"origin_id":-10,"origin_slot":0,"target_id":102,"target_slot":0,"type":"IMAGE"}],"extra":{}},{"id":"73dfeb4a-3c97-4492-9c11-2f29edd71136","version":1,"state":{"lastGroupId":20,"lastNodeId":108,"lastLinkId":123,"lastRerouteId":0},"revision":0,"config":{},"name":"Image Edit","inputNode":{"id":-10,"bounding":[3490.454833984375,12.23126220703125,120,80]},"outputNode":{"id":-20,"bounding":[6590.45458984375,12.23126220703125,120,60]},"inputs":[{"id":"c6986867-63ed-42d3-ac67-9b39514e1dbd","name":"image","type":"IMAGE","linkIds":[123],"pos":{"0":3590.454833984375,"1":32.23126220703125}},{"id":"bc6762e4-0cdd-4799-828d-a073bfa43274","name":"prompt","type":"STRING","linkIds":[115],"pos":{"0":3590.454833984375,"1":52.23126220703125}}],"outputs":[{"id":"8520a6e1-6e00-43e0-9561-bbbe94265f5c","name":"IMAGE","type":"IMAGE","linkIds":[116],"pos":{"0":6610.45458984375,"1":32.23126220703125}}],"widgets":[],"nodes":[{"id":86,"type":"CFGNorm","pos":[5250.45458984375,-487.76873779296875],"size":[290,60],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":91},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null}],"outputs":[{"localized_name":"patched_model","name":"patched_model","type":"MODEL","links":[96]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.50","Node name for S&R":"CFGNorm","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"ue_properties":{"widget_ue_connectable":{"strength":true}}},"widgets_values":[1]},{"id":88,"type":"VAELoader","pos":[4260.45458984375,-147.76873779296875],"size":[330,60],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"vae_name","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":0,"links":[93,102,104,109]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"VAELoader","models":[{"name":"qwen_image_vae.safetensors","url":"https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/resolve/main/split_files/vae/qwen_image_vae.safetensors","directory":"vae"}],"enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":["qwen_image_vae.safetensors"]},{"id":89,"type":"CLIPLoader","pos":[4260.45458984375,-307.76873779296875],"size":[330,110],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"clip_name","name":"clip_name","type":"COMBO","widget":{"name":"clip_name"},"link":null},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null},{"localized_name":"device","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null}],"outputs":[{"localized_name":"CLIP","name":"CLIP","type":"CLIP","slot_index":0,"links":[103,108]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"CLIPLoader","models":[{"name":"qwen_2.5_vl_7b_fp8_scaled.safetensors","url":"https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/resolve/main/split_files/text_encoders/qwen_2.5_vl_7b_fp8_scaled.safetensors","directory":"text_encoders"}],"enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":["qwen_2.5_vl_7b_fp8_scaled.safetensors","qwen_image","default"]},{"id":90,"type":"ModelSamplingAuraFlow","pos":[5250.45458984375,-597.7687377929688],"size":[290,60],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":94},{"localized_name":"shift","name":"shift","type":"FLOAT","widget":{"name":"shift"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[91]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"ModelSamplingAuraFlow","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":[3]},{"id":91,"type":"LoraLoaderModelOnly","pos":[4270.45458984375,-427.76873779296875],"size":[310,82],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":95},{"localized_name":"lora_name","name":"lora_name","type":"COMBO","widget":{"name":"lora_name"},"link":null},{"localized_name":"strength_model","name":"strength_model","type":"FLOAT","widget":{"name":"strength_model"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[94]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.50","Node name for S&R":"LoraLoaderModelOnly","models":[{"name":"Qwen-Image-Lightning-4steps-V1.0.safetensors","url":"https://huggingface.co/lightx2v/Qwen-Image-Lightning/resolve/main/Qwen-Image-Lightning-4steps-V1.0.safetensors","directory":"loras"}],"enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"ue_properties":{"widget_ue_connectable":{"lora_name":true,"strength_model":true}}},"widgets_values":["Qwen-Image-Lightning-4steps-V1.0.safetensors",1]},{"id":93,"type":"UNETLoader","pos":[4260.45458984375,-567.7687377929688],"size":[330,90],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"unet_name","name":"unet_name","type":"COMBO","widget":{"name":"unet_name"},"link":null},{"localized_name":"weight_dtype","name":"weight_dtype","type":"COMBO","widget":{"name":"weight_dtype"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[95]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"UNETLoader","models":[{"name":"qwen_image_edit_2509_fp8_e4m3fn.safetensors","url":"https://huggingface.co/Comfy-Org/Qwen-Image-Edit_ComfyUI/resolve/main/split_files/diffusion_models/qwen_image_edit_2509_fp8_e4m3fn.safetensors","directory":"diffusion_models"}],"enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":["qwen_image_edit_2509_fp8_e4m3fn.safetensors","default"]},{"id":94,"type":"SaveImage","pos":[5580.45458984375,-497.76873779296875],"size":[950,1040],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":100},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"SaveImage","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":["ComfyUI"]},{"id":97,"type":"EmptySD3LatentImage","pos":[5260.45458984375,392.23126220703125],"size":[270,106],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":null},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":null},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","links":[]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.59","Node name for S&R":"EmptySD3LatentImage"},"widgets_values":[1024,1024,1]},{"id":98,"type":"VAEEncode","pos":[5000.45458984375,432.23126220703125],"size":[140,46],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"pixels","name":"pixels","type":"IMAGE","link":101},{"localized_name":"vae","name":"vae","type":"VAE","link":102}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","links":[99]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.50","Node name for S&R":"VAEEncode","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"ue_properties":{"widget_ue_connectable":{}}}},{"id":103,"type":"MarkdownNote","pos":[5240.45458984375,562.2312622070312],"size":[330,90],"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[],"title":"Note: About image size","properties":{},"widgets_values":["You can use the latent from the **EmptySD3LatentImage** to replace **VAE Encode**, so you can customize the image size."],"color":"#432","bgcolor":"#653"},{"id":104,"type":"MarkdownNote","pos":[5250.45458984375,142.23126220703125],"size":[300,160],"flags":{},"order":5,"mode":0,"inputs":[],"outputs":[],"title":"Note: KSampler settings","properties":{},"widgets_values":["You can test and find the best setting by yourself. The following table is for reference.\n\n| Model            | Steps | CFG |\n|---------------------|---------------|---------------|\n| Offical             | 50               | 4.0               \n| fp8_e4m3fn             | 20                | 2.5               |\n| fp8_e4m3fn + 4steps LoRA    | 4               | 1.0               |\n"],"color":"#432","bgcolor":"#653"},{"id":105,"type":"MarkdownNote","pos":[3670.454833984375,-607.7687377929688],"size":[550,550],"flags":{},"order":6,"mode":0,"inputs":[],"outputs":[],"title":"Model links","properties":{"widget_ue_connectable":{}},"widgets_values":["[Tutorial](https://docs.comfy.org/tutorials/image/qwen/qwen-image-edit) | [教程](https://docs.comfy.org/zh-CN/tutorials/image/qwen/qwen-image-edit)\n\n\n## Model links\n\nYou can find all the models on [Comfy-Org/Qwen-Image_ComfyUI](https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/tree/main) and  [Comfy-Org/Qwen-Image-Edit_ComfyUI](https://huggingface.co/Comfy-Org/Qwen-Image-Edit_ComfyUI) \n\n**Diffusion model**\n\n- [qwen_image_edit_2509_fp8_e4m3fn.safetensors](https://huggingface.co/Comfy-Org/Qwen-Image-Edit_ComfyUI/resolve/main/split_files/diffusion_models/qwen_image_edit_2509_fp8_e4m3fn.safetensors)\n\n**LoRA**\n\n- [Qwen-Image-Lightning-4steps-V1.0.safetensors](https://huggingface.co/lightx2v/Qwen-Image-Lightning/resolve/main/Qwen-Image-Lightning-4steps-V1.0.safetensors)\n\n**Text encoder**\n\n- [qwen_2.5_vl_7b_fp8_scaled.safetensors](https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/resolve/main/split_files/text_encoders/qwen_2.5_vl_7b_fp8_scaled.safetensors)\n\n**VAE**\n\n- [qwen_image_vae.safetensors](https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/resolve/main/split_files/vae/qwen_image_vae.safetensors)\n\nModel Storage Location\n\n```\n📂 ComfyUI/\n├── 📂 models/\n│   ├── 📂 diffusion_models/\n│   │   └── qwen_image_edit_2509_fp8_e4m3fn.safetensors\n│   ├── 📂 loras/\n│   │   └── Qwen-Image-Lightning-4steps-V1.0.safetensors\n│   ├── 📂 vae/\n│   │   └── qwen_image_vae.safetensors\n│   └── 📂 text_encoders/\n│       └── qwen_2.5_vl_7b_fp8_scaled.safetensors\n```\n"],"color":"#432","bgcolor":"#653"},{"id":106,"type":"MarkdownNote","pos":[4270.45458984375,562.2312622070312],"size":[290,140],"flags":{},"order":7,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["This node is to avoid bad output results caused by excessively large input image sizes. Because when we input one image, we use the size of that input image.\n\nThe **TextEncodeQwenImageEditPlus** will scale your input to 1024×104 pixels. We use the size of your first input image. This node is to avoid having an input image size that is too large (such as 3000×3000 pixels), which could bring bad results."],"color":"#432","bgcolor":"#653"},{"id":100,"type":"TextEncodeQwenImageEditPlus","pos":[4730.45458984375,-557.7687377929688],"size":[400,200],"flags":{},"order":16,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":108},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":109},{"localized_name":"image1","name":"image1","shape":7,"type":"IMAGE","link":110},{"localized_name":"image2","name":"image2","shape":7,"type":"IMAGE","link":null},{"localized_name":"image3","name":"image3","shape":7,"type":"IMAGE","link":null},{"localized_name":"prompt","name":"prompt","type":"STRING","widget":{"name":"prompt"},"link":115}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[97]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.59","Node name for S&R":"TextEncodeQwenImageEditPlus"},"widgets_values":[""],"color":"#232","bgcolor":"#353"},{"id":87,"type":"VAEDecode","pos":[5590.45458984375,-597.7687377929688],"size":[210,46],"flags":{"collapsed":false},"order":11,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":92},{"localized_name":"vae","name":"vae","type":"VAE","link":93}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[100,116]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"VAEDecode","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}}},{"id":102,"type":"ImageScaleToTotalPixels","pos":[4301.71044921875,373.4263000488281],"size":[270,82],"flags":{},"order":17,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":123},{"localized_name":"upscale_method","name":"upscale_method","type":"COMBO","widget":{"name":"upscale_method"},"link":null},{"localized_name":"megapixels","name":"megapixels","type":"FLOAT","widget":{"name":"megapixels"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[101,105,110]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.50","Node name for S&R":"ImageScaleToTotalPixels","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"ue_properties":{"widget_ue_connectable":{"upscale_method":true,"megapixels":true}}},"widgets_values":["lanczos",1]},{"id":92,"type":"KSampler","pos":[5250.45458984375,-377.76873779296875],"size":[300,474],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":96},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":97},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":98},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":99},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[92]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.48","Node name for S&R":"KSampler","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":[18123143124536,"randomize",6,1,"euler","simple",1]},{"id":99,"type":"TextEncodeQwenImageEditPlus","pos":[4730.45458984375,-287.76873779296875],"size":[400,200],"flags":{},"order":15,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":103},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":104},{"localized_name":"image1","name":"image1","shape":7,"type":"IMAGE","link":105},{"localized_name":"image2","name":"image2","shape":7,"type":"IMAGE","link":null},{"localized_name":"image3","name":"image3","shape":7,"type":"IMAGE","link":null},{"localized_name":"prompt","name":"prompt","type":"STRING","widget":{"name":"prompt"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[98]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.59","Node name for S&R":"TextEncodeQwenImageEditPlus"},"widgets_values":["the princess"],"color":"#223","bgcolor":"#335"}],"groups":[{"id":17,"title":"Step1 - Load models","bounding":[4240.45458984375,-637.7687377929688,370,570],"color":"#3f789e","font_size":24,"flags":{}},{"id":18,"title":"Step 2 - Upload image for editing","bounding":[4240.45458984375,-37.76873016357422,970,550],"color":"#3f789e","font_size":24,"flags":{}},{"id":19,"title":"Step 4 - Prompt","bounding":[4640.45458984375,-637.7687377929688,570,570],"color":"#3f789e","font_size":24,"flags":{}},{"id":20,"title":"Step3 - Image Size","bounding":[5240.45458984375,312.23126220703125,310,200],"color":"#3f789e","font_size":24,"flags":{}}],"links":[{"id":91,"origin_id":90,"origin_slot":0,"target_id":86,"target_slot":0,"type":"MODEL"},{"id":92,"origin_id":92,"origin_slot":0,"target_id":87,"target_slot":0,"type":"LATENT"},{"id":93,"origin_id":88,"origin_slot":0,"target_id":87,"target_slot":1,"type":"VAE"},{"id":94,"origin_id":91,"origin_slot":0,"target_id":90,"target_slot":0,"type":"MODEL"},{"id":95,"origin_id":93,"origin_slot":0,"target_id":91,"target_slot":0,"type":"MODEL"},{"id":96,"origin_id":86,"origin_slot":0,"target_id":92,"target_slot":0,"type":"MODEL"},{"id":97,"origin_id":100,"origin_slot":0,"target_id":92,"target_slot":1,"type":"CONDITIONING"},{"id":98,"origin_id":99,"origin_slot":0,"target_id":92,"target_slot":2,"type":"CONDITIONING"},{"id":99,"origin_id":98,"origin_slot":0,"target_id":92,"target_slot":3,"type":"LATENT"},{"id":100,"origin_id":87,"origin_slot":0,"target_id":94,"target_slot":0,"type":"IMAGE"},{"id":101,"origin_id":102,"origin_slot":0,"target_id":98,"target_slot":0,"type":"IMAGE"},{"id":102,"origin_id":88,"origin_slot":0,"target_id":98,"target_slot":1,"type":"VAE"},{"id":103,"origin_id":89,"origin_slot":0,"target_id":99,"target_slot":0,"type":"CLIP"},{"id":104,"origin_id":88,"origin_slot":0,"target_id":99,"target_slot":1,"type":"VAE"},{"id":105,"origin_id":102,"origin_slot":0,"target_id":99,"target_slot":2,"type":"IMAGE"},{"id":108,"origin_id":89,"origin_slot":0,"target_id":100,"target_slot":0,"type":"CLIP"},{"id":109,"origin_id":88,"origin_slot":0,"target_id":100,"target_slot":1,"type":"VAE"},{"id":110,"origin_id":102,"origin_slot":0,"target_id":100,"target_slot":2,"type":"IMAGE"},{"id":115,"origin_id":-10,"origin_slot":1,"target_id":100,"target_slot":5,"type":"STRING"},{"id":116,"origin_id":87,"origin_slot":0,"target_id":-20,"target_slot":0,"type":"IMAGE"},{"id":123,"origin_id":-10,"origin_slot":0,"target_id":102,"target_slot":0,"type":"IMAGE"}],"extra":{}}]},"config":{},"extra":{"ue_links":[],"links_added_by_ue":[],"ds":{"scale":0.6397872030785415,"offset":[-937.3790352426831,1569.8519907279515]}},"version":0.4}